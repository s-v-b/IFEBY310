{
  "hash": "d376cf182d6581039a2319f0f034322e",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Introduction to Python\njupyter: python3\n\nengine: jupyter\n---\n\n\nWe introduce here the `python` language. \nOnly the bare minimum  for getting started with the data-science stack (a bunch of libraries for data science).\nPython is a **programming language**, as are `C++`, `java`, `fortran`, `javascript`,\netc.\n\n\n## Specific features of Python\n\n- an **interpreted** (as opposed to *compiled*) language. Contrary to e.g.\n`C++` or `fortran`, one does not compile Python code before executing it. \n\n- Used as a scripting language, by python `python script.py` in a terminal\n\n- But can be used also **interactively**: the jupyter notebook, iPython, etc.\n\n- A free software released under an **open-source** license: Python can\nbe used and distributed free of charge, even for building commercial\nsoftware.\n\n- **multi-platform**: Python is available for all major operating\nsystems, Windows, Linux/Unix, MacOS X, most likely your mobile phone\nOS, etc.\n\n- A very readable language with clear non-verbose syntax\n\n- A language for which a **large amount of high-quality** packages are\navailable for various applications, including web-frameworks and scientific\ncomputing\n\n- It has been one of the top **languages for data science** and **machine learning** for  years, because it is  expressive and and easy to deploy\n\n- An object-oriented language\n\nSee https://www.python.org/about/ for more information about distinguishing features of Python.\n\n::: {.content-hidden unless-profile=\"confidential\"}\n\n### Python 2 or Python 3?\n\n- Simple answer: *don't use Python 2, use Python 3*\n- Python 2 is *mostly deprecated* and *has not been maintained* for years \n- You'll end up hanged if you use Python 2\n- If Python 2 is mandatory at your workplace, find another work\n\n:::\n\n::: {.callout-important}\n\n### Jupyter or Quarto notebooks?\n\n- `quarto` is more `git` friendly than `jupyter`\n- Enjoy authentic editors\n  \n- Go for `quarto`\n  \n:::\n\n# Hello world\n\n- In a `jupyter`/`quarto` notebook, you have an interactive interpreter.\n\n- You type in the cells, execute commands \n\n::: {#afdccb6f .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=1}\n``` {.python .cell-code}\nprint(\"Hi everybody!\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nHi everybody!\n```\n:::\n:::\n\n\n# Basic types\n\n## Integers\n\n::: {#126fd4cc .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=2}\n``` {.python .cell-code}\n1 + 42\n```\n\n::: {.cell-output .cell-output-display execution_count=968}\n```\n43\n```\n:::\n:::\n\n\n::: {#4205295c .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=3}\n``` {.python .cell-code}\ntype(1+1)\n```\n\n::: {.cell-output .cell-output-display execution_count=969}\n```\nint\n```\n:::\n:::\n\n\nWe can *assign* values to variables with `=`\n\n::: {#560bf851 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=4}\n``` {.python .cell-code}\na = (3 + 5 ** 2) % 4\na\n```\n\n::: {.cell-output .cell-output-display execution_count=970}\n```\n0\n```\n:::\n:::\n\n\n## Remark\n\nWe are not compelled declare the type of a variable before assigning its value. \nIn C, conversely, one should write\n\n```C\nint a = 4;\n```\n\n::: {.callout-note}\n\nSince Python 3.5, it is possible but not mandatory to provide type hints in function signatures. \n\n:::\n\n\n## Something cool\n\n- **Arbitrary large** integer arithmetics\n\n::: {#e433b1e1 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=5}\n``` {.python .cell-code}\n17 ** 542\n```\n\n::: {.cell-output .cell-output-display execution_count=971}\n```\n8004153099680695240677662228684856314409365427758266999205063931175132640587226837141154215226851187899067565063096026317140186260836873939218139105634817684999348008544433671366043519135008200013865245747791955240844192282274023825424476387832943666754140847806277355805648624376507618604963106833797989037967001806494232055319953368448928268857747779203073913941756270620192860844700087001827697624308861431399538404552468712313829522630577767817531374612262253499813723569981496051353450351968993644643291035336065584116155321928452618573467361004489993801594806505273806498684433633838323916674207622468268867047187858269410016150838175127772100983052010703525089\n```\n:::\n:::\n\n\n## Floats\n\nThere exists a floating point type that is created when the variable has decimal values\n\n::: {#7accad2a .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=6}\n``` {.python .cell-code}\nc = 2.\n```\n:::\n\n\n::: {#558900e6 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=7}\n``` {.python .cell-code}\ntype(c)\n```\n\n::: {.cell-output .cell-output-display execution_count=973}\n```\nfloat\n```\n:::\n:::\n\n\n::: {#b527bc14 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=8}\n``` {.python .cell-code}\nc = 2\ntype(c)\n```\n\n::: {.cell-output .cell-output-display execution_count=974}\n```\nint\n```\n:::\n:::\n\n\n::: {#587264e7 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=9}\n``` {.python .cell-code}\ntruc = 1 / 2\ntruc\n```\n\n::: {.cell-output .cell-output-display execution_count=975}\n```\n0.5\n```\n:::\n:::\n\n\n::: {#c20a6a72 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-26T10:23:36.468643Z\",\"start_time\":\"2021-01-26T10:23:36.464148Z\"}}' execution_count=10}\n``` {.python .cell-code}\n1 // 2 + 1 % 2\n```\n\n::: {.cell-output .cell-output-display execution_count=976}\n```\n1\n```\n:::\n:::\n\n\n::: {#3045fd23 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=11}\n``` {.python .cell-code}\ntype(truc)\n```\n\n::: {.cell-output .cell-output-display execution_count=977}\n```\nfloat\n```\n:::\n:::\n\n\n## Boolean\n\nSimilarly, boolean types are created from a comparison\n\n::: {#0db4d88e .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=12}\n``` {.python .cell-code}\ntest = 3 > 4\ntest\n```\n\n::: {.cell-output .cell-output-display execution_count=978}\n```\nFalse\n```\n:::\n:::\n\n\n::: {#bae0b59b .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=13}\n``` {.python .cell-code}\ntype(test)\n```\n\n::: {.cell-output .cell-output-display execution_count=979}\n```\nbool\n```\n:::\n:::\n\n\n::: {#20a1caee .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=14}\n``` {.python .cell-code}\nFalse == (not True)\n```\n\n::: {.cell-output .cell-output-display execution_count=980}\n```\nTrue\n```\n:::\n:::\n\n\n::: {#5f33ed6f .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=15}\n``` {.python .cell-code}\n1.41 < 2.71 and 2.71 < 3.14\n```\n\n::: {.cell-output .cell-output-display execution_count=981}\n```\nTrue\n```\n:::\n:::\n\n\n::: {#94f6e804 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=16}\n``` {.python .cell-code}\n# It's equivalent to\n1.41 < 2.71 < 3.14\n```\n\n::: {.cell-output .cell-output-display execution_count=982}\n```\nTrue\n```\n:::\n:::\n\n\n## Type conversion (casting)\n\n::: {#5522aff7 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=17}\n``` {.python .cell-code}\na = 1\ntype(a)\n```\n\n::: {.cell-output .cell-output-display execution_count=983}\n```\nint\n```\n:::\n:::\n\n\n::: {#5f49a0f6 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=18}\n``` {.python .cell-code}\nb = float(a)\ntype(b)\n```\n\n::: {.cell-output .cell-output-display execution_count=984}\n```\nfloat\n```\n:::\n:::\n\n\n::: {#b3248654 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=19}\n``` {.python .cell-code}\nstr(b)\n```\n\n::: {.cell-output .cell-output-display execution_count=985}\n```\n'1.0'\n```\n:::\n:::\n\n\n::: {#683209e7 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=20}\n``` {.python .cell-code}\nbool(b)\n# All non-zero, non empty objects are casted to boolean as True (more later)\n```\n\n::: {.cell-output .cell-output-display execution_count=986}\n```\nTrue\n```\n:::\n:::\n\n\n::: {#2809bf4a .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=21}\n``` {.python .cell-code}\nbool(1-1)\n```\n\n::: {.cell-output .cell-output-display execution_count=987}\n```\nFalse\n```\n:::\n:::\n\n\n#  Containers\n\nPython provides many efficient types of *containers* or *sequences*, in which collections of objects can be stored. \n\nThe main ones are `list`, `tuple`, `set` and `dict` (but there are many others...)\n\n## Tuples\n\n::: {#2498ab14 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=22}\n``` {.python .cell-code}\ntt = 'truc', 3.14, \"truc\"\ntt\n```\n\n::: {.cell-output .cell-output-display execution_count=988}\n```\n('truc', 3.14, 'truc')\n```\n:::\n:::\n\n\n::: {#64671061 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=23}\n``` {.python .cell-code}\ntt[0]\n```\n\n::: {.cell-output .cell-output-display execution_count=989}\n```\n'truc'\n```\n:::\n:::\n\n\nYou can't change a tuple, we say that it's *immutable*\n\n::: {#0f908c8b .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=24}\n``` {.python .cell-code}\ntry:\n    tt[0] = 1\nexcept TypeError:\n    print(f\"TypeError: 'tuple' object does not support item assignment\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTypeError: 'tuple' object does not support item assignment\n```\n:::\n:::\n\n\nThree ways of doing the same thing\n\n::: {#65cf9fa2 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=25}\n``` {.python .cell-code}\n# Method 1\ntuple([1, 2, 3])\n```\n\n::: {.cell-output .cell-output-display execution_count=991}\n```\n(1, 2, 3)\n```\n:::\n:::\n\n\n::: {#1ca11a2c .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=26}\n``` {.python .cell-code}\n# Method 2\n1, 2, 3\n```\n\n::: {.cell-output .cell-output-display execution_count=992}\n```\n(1, 2, 3)\n```\n:::\n:::\n\n\n::: {#7a5f4c81 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=27}\n``` {.python .cell-code}\n# Method 3\n(1, 2, 3)\n```\n\n::: {.cell-output .cell-output-display execution_count=993}\n```\n(1, 2, 3)\n```\n:::\n:::\n\n\n**Simpler is better in Python**, so usually you want to use Method 2.\n\n::: {#31371812 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=28}\n``` {.python .cell-code}\ntoto = 1, 2, 3\ntoto\n```\n\n::: {.cell-output .cell-output-display execution_count=994}\n```\n(1, 2, 3)\n```\n:::\n:::\n\n\n- This is serious !\n\n## The Zen of Python easter's egg\n\n::: {#ca46c4e0 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=29}\n``` {.python .cell-code}\nimport this\n```\n:::\n\n\n## Lists\n\nA list is an ordered collection of objects. These objects may have different types. For example:\n\n::: {#3e3015ac .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=30}\n``` {.python .cell-code}\ncolors = ['red', 'blue', 'green', 'black', 'white']\n```\n:::\n\n\n::: {#c94e9d81 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-26T10:29:21.606351Z\",\"start_time\":\"2021-01-26T10:29:21.601561Z\"}}' execution_count=31}\n``` {.python .cell-code}\ncolors[0]\n```\n\n::: {.cell-output .cell-output-display execution_count=997}\n```\n'red'\n```\n:::\n:::\n\n\n::: {#a6c10d82 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=32}\n``` {.python .cell-code}\ntype(colors)\n```\n\n::: {.cell-output .cell-output-display execution_count=998}\n```\nlist\n```\n:::\n:::\n\n\n*Indexing:* accessing individual objects contained in the list by their position\n\n::: {#80272271 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=33}\n``` {.python .cell-code}\ncolors[2]\n```\n\n::: {.cell-output .cell-output-display execution_count=999}\n```\n'green'\n```\n:::\n:::\n\n\n::: {#10bf8ea6 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=34}\n``` {.python .cell-code}\ncolors[2] = 3.14\ncolors\n```\n\n::: {.cell-output .cell-output-display execution_count=1000}\n```\n['red', 'blue', 3.14, 'black', 'white']\n```\n:::\n:::\n\n\n::: {.callout-warning}\n\nFor any *iterable* object in Python, indexing *starts at 0* (as in C), not at 1 (as in Fortran, R, or Matlab).\n\n:::\n\nCounting from the end with negative indices:\n\n::: {#b03bbc44 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=35}\n``` {.python .cell-code}\ncolors[-1]\n```\n\n::: {.cell-output .cell-output-display execution_count=1001}\n```\n'white'\n```\n:::\n:::\n\n\nIndex must remain in the range of the list\n\n::: {#284651f0 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=36}\n``` {.python .cell-code}\ntry:\n    colors[10]\nexcept IndexError:\n    print(f\"IndexError: 10 >= {len(colors)} ==len(colors), index out of range \")\n```\n:::\n\n\n::: {#262aff6f .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=37}\n``` {.python .cell-code}\ncolors\n```\n\n::: {.cell-output .cell-output-display execution_count=1002}\n```\n['red', 'blue', 3.14, 'black', 'white']\n```\n:::\n:::\n\n\n::: {#b4eb48a7 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-26T10:30:02.143331Z\",\"start_time\":\"2021-01-26T10:30:02.137270Z\"}}' execution_count=38}\n``` {.python .cell-code}\ntt\n```\n\n::: {.cell-output .cell-output-display execution_count=1003}\n```\n('truc', 3.14, 'truc')\n```\n:::\n:::\n\n\n::: {#3e8722c2 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=39}\n``` {.python .cell-code}\ncolors.append(tt)\ncolors\n```\n\n::: {.cell-output .cell-output-display execution_count=1004}\n```\n['red', 'blue', 3.14, 'black', 'white', ('truc', 3.14, 'truc')]\n```\n:::\n:::\n\n\n::: {#e9fea7c0 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=40}\n``` {.python .cell-code}\nlen(colors)\n```\n\n::: {.cell-output .cell-output-display execution_count=1005}\n```\n6\n```\n:::\n:::\n\n\n::: {#46185bb7 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-26T10:30:52.949200Z\",\"start_time\":\"2021-01-26T10:30:52.944225Z\"}}' execution_count=41}\n``` {.python .cell-code}\nlen(tt)\n```\n\n::: {.cell-output .cell-output-display execution_count=1006}\n```\n3\n```\n:::\n:::\n\n\n## Slicing: obtaining sublists of regularly-spaced elements\n\nThis work with anything iterable whenever it makes sense (`list`, `str`, `tuple`, etc.)\n\n::: {#a052faab .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=42}\n``` {.python .cell-code}\ncolors\n```\n\n::: {.cell-output .cell-output-display execution_count=1007}\n```\n['red', 'blue', 3.14, 'black', 'white', ('truc', 3.14, 'truc')]\n```\n:::\n:::\n\n\n::: {#5bce85e4 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=43}\n``` {.python .cell-code}\nlist(reversed(colors))\n```\n\n::: {.cell-output .cell-output-display execution_count=1008}\n```\n[('truc', 3.14, 'truc'), 'white', 'black', 3.14, 'blue', 'red']\n```\n:::\n:::\n\n\n::: {#92371edc .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=44}\n``` {.python .cell-code}\ncolors[::-1]\n```\n\n::: {.cell-output .cell-output-display execution_count=1009}\n```\n[('truc', 3.14, 'truc'), 'white', 'black', 3.14, 'blue', 'red']\n```\n:::\n:::\n\n\n::: {.callout-important}\n\n### Slicing syntax: \n\n`colors[start:stop:stride]`\n\n`start, stop, stride` are optional, with default values `0, len(sequence), 1`\n\n:::\nl\n\n::: {#7f260158 .cell execution_count=45}\n``` {.python .cell-code}\nprint(slice(4))\nprint(slice(1,5))\nprint(slice(None,13,3))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nslice(None, 4, None)\nslice(1, 5, None)\nslice(None, 13, 3)\n```\n:::\n:::\n\n\n::: {#24c5656a .cell execution_count=46}\n``` {.python .cell-code}\nsl = slice(1,5,2)\ncolors[sl]\n```\n\n::: {.cell-output .cell-output-display execution_count=1011}\n```\n['blue', 'black']\n```\n:::\n:::\n\n\n::: {#18705fb2 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=47}\n``` {.python .cell-code}\ncolors\n```\n\n::: {.cell-output .cell-output-display execution_count=1012}\n```\n['red', 'blue', 3.14, 'black', 'white', ('truc', 3.14, 'truc')]\n```\n:::\n:::\n\n\n::: {#fab7110b .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=48}\n``` {.python .cell-code}\ncolors[3:]\n```\n\n::: {.cell-output .cell-output-display execution_count=1013}\n```\n['black', 'white', ('truc', 3.14, 'truc')]\n```\n:::\n:::\n\n\n::: {#513e1bfa .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=49}\n``` {.python .cell-code}\ncolors[:3]\n```\n\n::: {.cell-output .cell-output-display execution_count=1014}\n```\n['red', 'blue', 3.14]\n```\n:::\n:::\n\n\n::: {#3089363a .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=50}\n``` {.python .cell-code}\ncolors[1::2]\n```\n\n::: {.cell-output .cell-output-display execution_count=1015}\n```\n['blue', 'black', ('truc', 3.14, 'truc')]\n```\n:::\n:::\n\n\n::: {#a72feba8 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=51}\n``` {.python .cell-code}\ncolors[::-1]\n```\n\n::: {.cell-output .cell-output-display execution_count=1016}\n```\n[('truc', 3.14, 'truc'), 'white', 'black', 3.14, 'blue', 'red']\n```\n:::\n:::\n\n\n## Strings\n\nDifferent string syntaxes (simple, double or triple quotes):\n\n::: {#0b19c8c1 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=52}\n``` {.python .cell-code}\ns = 'tintin'\ntype(s)\n```\n\n::: {.cell-output .cell-output-display execution_count=1017}\n```\nstr\n```\n:::\n:::\n\n\n::: {#37f37796 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=53}\n``` {.python .cell-code}\ns\n```\n\n::: {.cell-output .cell-output-display execution_count=1018}\n```\n'tintin'\n```\n:::\n:::\n\n\n::: {#01f5f4f6 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=54}\n``` {.python .cell-code}\ns = \"\"\"         Bonjour,\nJe m'appelle Stephane.\nJe vous souhaite une bonne journée.\nSalut.       \n\"\"\"\ns\n```\n\n::: {.cell-output .cell-output-display execution_count=1019}\n```\n\"         Bonjour,\\nJe m'appelle Stephane.\\nJe vous souhaite une bonne journée.\\nSalut.       \\n\"\n```\n:::\n:::\n\n\n::: {#6fc2102d .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=55}\n``` {.python .cell-code}\ns.strip()\n```\n\n::: {.cell-output .cell-output-display execution_count=1020}\n```\n\"Bonjour,\\nJe m'appelle Stephane.\\nJe vous souhaite une bonne journée.\\nSalut.\"\n```\n:::\n:::\n\n\n::: {#f870ebc3 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=56}\n``` {.python .cell-code}\nprint(s.strip())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nBonjour,\nJe m'appelle Stephane.\nJe vous souhaite une bonne journée.\nSalut.\n```\n:::\n:::\n\n\n::: {#e4df526e .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=57}\n``` {.python .cell-code}\nlen(s)\n```\n\n::: {.cell-output .cell-output-display execution_count=1022}\n```\n91\n```\n:::\n:::\n\n\n::: {#357b251c .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=58}\n``` {.python .cell-code}\n# Casting to a list\nlist(s.strip()[:15])\n```\n\n::: {.cell-output .cell-output-display execution_count=1023}\n```\n['B', 'o', 'n', 'j', 'o', 'u', 'r', ',', '\\n', 'J', 'e', ' ', 'm', \"'\", 'a']\n```\n:::\n:::\n\n\n::: {#19ffd8be .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=59}\n``` {.python .cell-code}\n# Arithmetics\nprint('Bonjour' * 2)\nprint('Hello' + ' all')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nBonjourBonjour\nHello all\n```\n:::\n:::\n\n\n::: {#5fc0e11a .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=60}\n``` {.python .cell-code}\nsss = 'A'\nsss += 'bc'\nsss += 'dE'\nsss.lower()\n```\n\n::: {.cell-output .cell-output-display execution_count=1025}\n```\n'abcde'\n```\n:::\n:::\n\n\n::: {#f3cf7a62 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=61}\n``` {.python .cell-code}\nss = s.strip()\nprint(ss[:10] + ss[24:28])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nBonjour,\nJepha\n```\n:::\n:::\n\n\n::: {#3ca7b898 .cell execution_count=62}\n``` {.python .cell-code}\ns.strip()\n```\n\n::: {.cell-output .cell-output-display execution_count=1027}\n```\n\"Bonjour,\\nJe m'appelle Stephane.\\nJe vous souhaite une bonne journée.\\nSalut.\"\n```\n:::\n:::\n\n\n::: {#6651d87b .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=63}\n``` {.python .cell-code}\ns.strip().split('\\n')\n```\n\n::: {.cell-output .cell-output-display execution_count=1028}\n```\n['Bonjour,',\n \"Je m'appelle Stephane.\",\n 'Je vous souhaite une bonne journée.',\n 'Salut.']\n```\n:::\n:::\n\n\n::: {#499c5208 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=64}\n``` {.python .cell-code}\ns[::3]\n```\n\n::: {.cell-output .cell-output-display execution_count=1029}\n```\n'   BjrJmpl ea.eo ui eoeon.at  \\n'\n```\n:::\n:::\n\n\n::: {#d002fdea .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=65}\n``` {.python .cell-code}\ns[3:10]\n```\n\n::: {.cell-output .cell-output-display execution_count=1030}\n```\n'      B'\n```\n:::\n:::\n\n\n::: {#e2d1f597 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=66}\n``` {.python .cell-code}\n\" \".join(['Il', 'fait', 'super', 'beau', \"aujourd'hui\"])\n```\n\n::: {.cell-output .cell-output-display execution_count=1031}\n```\n\"Il fait super beau aujourd'hui\"\n```\n:::\n:::\n\n\nChaining method calls is the basic of pipeline building. \n\n::: {#d46f619b .cell execution_count=67}\n``` {.python .cell-code}\n( \n    \" \".join(['Il', 'fait', 'super', 'beau', \"aujourd'hui\"])\n       .title()\n       .replace(' ', '')\n       .replace(\"'\",\"\")\n)\n```\n\n::: {.cell-output .cell-output-display execution_count=1032}\n```\n'IlFaitSuperBeauAujourdHui'\n```\n:::\n:::\n\n\n### Important\n\nA string is *immutable* !!\n\n::: {#c0dd9173 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=68}\n``` {.python .cell-code}\ns = 'I am an immutable guy'\n```\n:::\n\n\n::: {#ff2a6a53 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=69}\n``` {.python .cell-code}\ntry:  \n    s[2] = 's'\nexcept TypeError:\n    print(f\"Strings are immutable! s is still '{s}'\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nStrings are immutable! s is still 'I am an immutable guy'\n```\n:::\n:::\n\n\n::: {#9143f4af .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=70}\n``` {.python .cell-code}\nid(s)\n```\n\n::: {.cell-output .cell-output-display execution_count=1035}\n```\n130263839342896\n```\n:::\n:::\n\n\n::: {#c3bd4408 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:25.275379Z\",\"start_time\":\"2021-01-15T08:34:25.269724Z\"}}' execution_count=71}\n``` {.python .cell-code}\nprint(s + ', for sure')\nid(s), id(s + ' for sure')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nI am an immutable guy, for sure\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=1036}\n```\n(130263839342896, 130262877842976)\n```\n:::\n:::\n\n\n### Extra stuff with strings\n\n::: {#228bd2a4 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=72}\n``` {.python .cell-code}\n'square of 2 is ' + str(2 ** 2)\n```\n\n::: {.cell-output .cell-output-display execution_count=1037}\n```\n'square of 2 is 4'\n```\n:::\n:::\n\n\n::: {#aec478c5 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=73}\n``` {.python .cell-code}\n'square of 2 is %d' % 2 ** 2\n```\n\n::: {.cell-output .cell-output-display execution_count=1038}\n```\n'square of 2 is 4'\n```\n:::\n:::\n\n\n::: {#f5a37635 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=74}\n``` {.python .cell-code}\n'square of 2 is {}'.format(2 ** 2)\n```\n\n::: {.cell-output .cell-output-display execution_count=1039}\n```\n'square of 2 is 4'\n```\n:::\n:::\n\n\n::: {#868654a0 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=75}\n``` {.python .cell-code}\n'square of 2 is {square}'.format(square=2 ** 2)\n```\n\n::: {.cell-output .cell-output-display execution_count=1040}\n```\n'square of 2 is 4'\n```\n:::\n:::\n\n\n::: {#51a9cb68 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=76}\n``` {.python .cell-code}\n# And since Python 3.6 you can use an `f-string`\nnumber = 2\nsquare = number ** 2\n\nf'square of {number} is {square}'\n```\n\n::: {.cell-output .cell-output-display execution_count=1041}\n```\n'square of 2 is 4'\n```\n:::\n:::\n\n\n### The `in` keyword\n\nYou can use the `in` keyword with any container, whenever it makes sense\n\n::: {#425c5ba8 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=77}\n``` {.python .cell-code}\nprint(s)\nprint('Salut' in s)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nI am an immutable guy\nFalse\n```\n:::\n:::\n\n\n::: {#a8088094 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=78}\n``` {.python .cell-code}\nprint(tt)\nprint('truc' in tt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n('truc', 3.14, 'truc')\nTrue\n```\n:::\n:::\n\n\n::: {#15c6aa11 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=79}\n``` {.python .cell-code}\nprint(colors)\nprint('truc' in colors)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['red', 'blue', 3.14, 'black', 'white', ('truc', 3.14, 'truc')]\nFalse\n```\n:::\n:::\n\n\n::: {#3f016733 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:31.035913Z\",\"start_time\":\"2021-01-15T08:34:31.030502Z\"}}' execution_count=80}\n``` {.python .cell-code}\n('truc', 3.14, 'truc') in colors\n```\n\n::: {.cell-output .cell-output-display execution_count=1045}\n```\nTrue\n```\n:::\n:::\n\n\n::: {.callout-warning}\n\nStrings are not bytes. Have a look at chapter 4 *Unicode Text versus Bytes* in [Fluent Python](https://www.oreilly.com/library/view/fluent-python-2nd/9781492056348/) \n\n:::\n\n### Brain-teasing\n\nExplain this weird behaviour:\n\n::: {#94b58375 .cell execution_count=81}\n``` {.python .cell-code}\n5 in [1, 2, 3, 4] == False\n```\n\n::: {.cell-output .cell-output-display execution_count=1046}\n```\nFalse\n```\n:::\n:::\n\n\n::: {#d2b9ac73 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=82}\n``` {.python .cell-code}\n[1, 2, 3, 4] == False\n```\n\n::: {.cell-output .cell-output-display execution_count=1047}\n```\nFalse\n```\n:::\n:::\n\n\n::: {#0c1fdbd7 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=83}\n``` {.python .cell-code}\n5 not in [1, 2, 3, 4]\n```\n\n::: {.cell-output .cell-output-display execution_count=1048}\n```\nTrue\n```\n:::\n:::\n\n\n::: {#c2664d5d .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=84}\n``` {.python .cell-code}\n(5 in [1, 2, 3, 4]) == False\n```\n\n::: {.cell-output .cell-output-display execution_count=1049}\n```\nTrue\n```\n:::\n:::\n\n\n::: {#1127bdd5 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=85}\n``` {.python .cell-code}\n# ANSWER.\n# This is a chained comparison. We have seen that \n1 < 2 < 3\n# is equivalent to\n(1 < 2) and (2 < 3)\n# so that\n5 in [1, 2, 3, 4] == False\n# is equivalent to\n(5 in [1, 2, 3, 4]) and ([1, 2, 3, 4] == False)\n```\n\n::: {.cell-output .cell-output-display execution_count=1050}\n```\nFalse\n```\n:::\n:::\n\n\n::: {#077804fe .cell execution_count=86}\n``` {.python .cell-code}\n(5 in [1, 2, 3, 4])\n```\n\n::: {.cell-output .cell-output-display execution_count=1051}\n```\nFalse\n```\n:::\n:::\n\n\n::: {#dfca259a .cell execution_count=87}\n``` {.python .cell-code}\n([1, 2, 3, 4] == False)\n```\n\n::: {.cell-output .cell-output-display execution_count=1052}\n```\nFalse\n```\n:::\n:::\n\n\n## Dictionaries\n\n- A dictionary is basically an efficient table that **maps keys to values**.\n- The **MOST** important container in Python. \n- Many things are actually a `dict` under the hood in `Python`\n\n::: {#6fe9d7ad .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=88}\n``` {.python .cell-code}\ntel = {'emmanuelle': 5752, 'sebastian': 5578}\nprint(tel)\nprint(type(tel))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{'emmanuelle': 5752, 'sebastian': 5578}\n<class 'dict'>\n```\n:::\n:::\n\n\n::: {#f8c837d0 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=89}\n``` {.python .cell-code}\ntel['emmanuelle'], tel['sebastian']\n```\n\n::: {.cell-output .cell-output-display execution_count=1054}\n```\n(5752, 5578)\n```\n:::\n:::\n\n\n::: {#36607560 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:33.711591Z\",\"start_time\":\"2021-01-15T08:34:33.705748Z\"}}' execution_count=90}\n``` {.python .cell-code}\ntel['francis'] = '5919'\ntel\n```\n\n::: {.cell-output .cell-output-display execution_count=1055}\n```\n{'emmanuelle': 5752, 'sebastian': 5578, 'francis': '5919'}\n```\n:::\n:::\n\n\n::: {#b7a26944 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:33.889041Z\",\"start_time\":\"2021-01-15T08:34:33.883802Z\"}}' execution_count=91}\n``` {.python .cell-code}\nlen(tel)\n```\n\n::: {.cell-output .cell-output-display execution_count=1056}\n```\n3\n```\n:::\n:::\n\n\n### Important remarks\n\n- Keys can be of different types\n- A key must be of **immutable** type\n\n::: {#aa2d984c .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:35.180227Z\",\"start_time\":\"2021-01-15T08:34:35.172919Z\"}}' execution_count=92}\n``` {.python .cell-code}\ntel[7162453] = [1, 3, 2]\ntel[3.14] = 'bidule'\ntel[('jaouad', 2)] = 1234\ntel\n```\n\n::: {.cell-output .cell-output-display execution_count=1057}\n```\n{'emmanuelle': 5752,\n 'sebastian': 5578,\n 'francis': '5919',\n 7162453: [1, 3, 2],\n 3.14: 'bidule',\n ('jaouad', 2): 1234}\n```\n:::\n:::\n\n\n::: {#8a7a70e4 .cell execution_count=93}\n``` {.python .cell-code}\ntry:\n    sorted(tel)\nexcept TypeError:\n    print(\"TypeError: '<' not supported between instances of 'int' and 'str'\")    \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTypeError: '<' not supported between instances of 'int' and 'str'\n```\n:::\n:::\n\n\n::: {#cd655a3f .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:35.781423Z\",\"start_time\":\"2021-01-15T08:34:35.770370Z\"}}' execution_count=94}\n``` {.python .cell-code}\n# A list is mutable and not hashable\ntry:\n    tel[['jaouad']] = '5678'\nexcept TypeError:\n    print(\"TypeError: unhashable type: 'list'\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTypeError: unhashable type: 'list'\n```\n:::\n:::\n\n\n::: {#8ecd3de2 .cell execution_count=95}\n``` {.python .cell-code}\ntry:\n    tel[2]\nexcept KeyError:\n    print(\"KeyError: 2\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nKeyError: 2\n```\n:::\n:::\n\n\n::: {#b3a9b211 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=96}\n``` {.python .cell-code}\ntel = {'emmanuelle': 5752, 'sebastian' : 5578, 'jaouad' : 1234}\nprint(tel.keys())\nprint(tel.values())\nprint(tel.items())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ndict_keys(['emmanuelle', 'sebastian', 'jaouad'])\ndict_values([5752, 5578, 1234])\ndict_items([('emmanuelle', 5752), ('sebastian', 5578), ('jaouad', 1234)])\n```\n:::\n:::\n\n\n::: {#95036383 .cell execution_count=97}\n``` {.python .cell-code}\nlist(tel.keys())[2]\n```\n\n::: {.cell-output .cell-output-display execution_count=1062}\n```\n'jaouad'\n```\n:::\n:::\n\n\n::: {#74a0e566 .cell execution_count=98}\n``` {.python .cell-code}\ntel.values().mapping\n```\n\n::: {.cell-output .cell-output-display execution_count=1063}\n```\nmappingproxy({'emmanuelle': 5752, 'sebastian': 5578, 'jaouad': 1234})\n```\n:::\n:::\n\n\n::: {#96f26307 .cell execution_count=99}\n``` {.python .cell-code}\ntype(tel.keys())\n```\n\n::: {.cell-output .cell-output-display execution_count=1064}\n```\ndict_keys\n```\n:::\n:::\n\n\n::: {#68ec0c39 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=100}\n``` {.python .cell-code}\n'rémi' in tel\n```\n\n::: {.cell-output .cell-output-display execution_count=1065}\n```\nFalse\n```\n:::\n:::\n\n\n::: {#b85cab9f .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:36.649224Z\",\"start_time\":\"2021-01-15T08:34:36.643788Z\"}}' execution_count=101}\n``` {.python .cell-code}\nlist(tel)\n```\n\n::: {.cell-output .cell-output-display execution_count=1066}\n```\n['emmanuelle', 'sebastian', 'jaouad']\n```\n:::\n:::\n\n\n::: {#370e47aa .cell execution_count=102}\n``` {.python .cell-code}\n'rémi' in tel.keys()\n```\n\n::: {.cell-output .cell-output-display execution_count=1067}\n```\nFalse\n```\n:::\n:::\n\n\nYou can swap values like this\n\n::: {#0f3bd710 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:37.036245Z\",\"start_time\":\"2021-01-15T08:34:37.032296Z\"}}' execution_count=103}\n``` {.python .cell-code}\nprint(tel)\ntel['emmanuelle'], tel['sebastian'] = tel['sebastian'], tel['emmanuelle']\nprint(tel)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{'emmanuelle': 5752, 'sebastian': 5578, 'jaouad': 1234}\n{'emmanuelle': 5578, 'sebastian': 5752, 'jaouad': 1234}\n```\n:::\n:::\n\n\n::: {#ca781031 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:37.755117Z\",\"start_time\":\"2021-01-15T08:34:37.750155Z\"}}' execution_count=104}\n``` {.python .cell-code}\n# It works, since\na, b = 2.71, 3.14\na, b = b, a\na, b\n```\n\n::: {.cell-output .cell-output-display execution_count=1069}\n```\n(3.14, 2.71)\n```\n:::\n:::\n\n\n### Exercise 1\n\nGet keys of `tel` sorted by decreasing order\n\n::: {#a500b278 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=105}\n``` {.python .cell-code}\ntel = {'emmanuelle': 5752, 'sebastian' : 5578, 'jaouad' : 1234}\n```\n:::\n\n\n::: {.content-visible when-profile='solution'} \n \n#### Answer\n\n::: {#6f699b57 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:38.860742Z\",\"start_time\":\"2021-01-15T08:34:38.855547Z\"}}' execution_count=106}\n``` {.python .cell-code}\nsorted(tel, reverse=True)\n```\n\n::: {.cell-output .cell-output-display execution_count=1071}\n```\n['sebastian', 'jaouad', 'emmanuelle']\n```\n:::\n:::\n\n\n::: {#685959e6 .cell execution_count=107}\n``` {.python .cell-code}\ntype(sorted(tel, reverse=True))\n```\n\n::: {.cell-output .cell-output-display execution_count=1072}\n```\nlist\n```\n:::\n:::\n\n\n:::\n\n### Exercise 2\n\nGet keys of `tel` sorted by increasing _values_\n\n::: {#d1c44742 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:39.295210Z\",\"start_time\":\"2021-01-15T08:34:39.291759Z\"}}' execution_count=108}\n``` {.python .cell-code}\ntel = {'emmanuelle': 5752, 'sebastian' : 5578, 'jaouad' : 1234}\n```\n:::\n\n\n::: {.content-visible when-profile='solution'} \n \n#### Answer\n\n::: {#b4d97b14 .cell execution_count=109}\n``` {.python .cell-code}\ntel[\"sebastian\"]\n```\n\n::: {.cell-output .cell-output-display execution_count=1074}\n```\n5578\n```\n:::\n:::\n\n\n::: {#97df8bd5 .cell execution_count=110}\n``` {.python .cell-code}\ntel.get('rémi')\n```\n:::\n\n\n::: {#b08b6917 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=111}\n``` {.python .cell-code}\nsorted(tel, key=tel.get)\n```\n\n::: {.cell-output .cell-output-display execution_count=1076}\n```\n['jaouad', 'sebastian', 'emmanuelle']\n```\n:::\n:::\n\n\n:::\n\n### Exercise 3\n\nObtain a sorted-by-key version of `tel`\n\n::: {#85c6a635 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:40.064213Z\",\"start_time\":\"2021-01-15T08:34:40.060078Z\"}}' execution_count=112}\n``` {.python .cell-code}\ntel = {'emmanuelle': 5752, 'sebastian' : 5578, 'jaouad' : 1234}\n```\n:::\n\n\n::: {.content-visible when-profile='solution'} \n \n#### Answer\n\n- A dict is inherently **orderless**\n- Only a _representation_ of a dict can be ordered\n\n::: {#2ec14b7c .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=113}\n``` {.python .cell-code}\n# Simplest is through a list\nprint(type(tel.items()))\nissubclass(type(tel.items()), list)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'dict_items'>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=1078}\n```\nFalse\n```\n:::\n:::\n\n\n::: {#f2f6cf7d .cell execution_count=114}\n``` {.python .cell-code}\nsorted(tel.items())\n```\n\n::: {.cell-output .cell-output-display execution_count=1079}\n```\n[('emmanuelle', 5752), ('jaouad', 1234), ('sebastian', 5578)]\n```\n:::\n:::\n\n\nIf you really want an ordered dict `OrderDict` memorizes order of insertion in it\n\n::: {#17649ccc .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:41.406578Z\",\"start_time\":\"2021-01-15T08:34:41.400640Z\"}}' execution_count=115}\n``` {.python .cell-code}\nfrom collections import OrderedDict\n\nOrderedDict(sorted(tel.items()))\n```\n\n::: {.cell-output .cell-output-display execution_count=1080}\n```\nOrderedDict([('emmanuelle', 5752), ('jaouad', 1234), ('sebastian', 5578)])\n```\n:::\n:::\n\n\n:::\n\n## Sets\n\nA set is an unordered container, containing unique elements\n\n::: {#fe3ec5d5 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:43.408375Z\",\"start_time\":\"2021-01-15T08:34:43.402917Z\"}}' execution_count=116}\n``` {.python .cell-code}\nss = {1, 2, 2, 2, 3, 3, 'tintin', 'tintin', 'toto'}\nss\n```\n\n::: {.cell-output .cell-output-display execution_count=1081}\n```\n{1, 2, 3, 'tintin', 'toto'}\n```\n:::\n:::\n\n\n::: {#ba13b087 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:43.689264Z\",\"start_time\":\"2021-01-15T08:34:43.683234Z\"}}' execution_count=117}\n``` {.python .cell-code}\ns = 'truc truc bidule truc'\nset(s)\n```\n\n::: {.cell-output .cell-output-display execution_count=1082}\n```\n{' ', 'b', 'c', 'd', 'e', 'i', 'l', 'r', 't', 'u'}\n```\n:::\n:::\n\n\n::: {#0e7e2003 .cell execution_count=118}\n``` {.python .cell-code}\nset(list(s))\n```\n\n::: {.cell-output .cell-output-display execution_count=1083}\n```\n{' ', 'b', 'c', 'd', 'e', 'i', 'l', 'r', 't', 'u'}\n```\n:::\n:::\n\n\n::: {#0d2ca47c .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=119}\n``` {.python .cell-code}\n{1, 5, 2, 1, 1}.union({1, 2, 3})\n```\n\n::: {.cell-output .cell-output-display execution_count=1084}\n```\n{1, 2, 3, 5}\n```\n:::\n:::\n\n\n::: {#1f4b4ecf .cell execution_count=120}\n``` {.python .cell-code}\nset((1, 5, 3, 2))\n```\n\n::: {.cell-output .cell-output-display execution_count=1085}\n```\n{1, 2, 3, 5}\n```\n:::\n:::\n\n\n::: {#f8e1d9ea .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:44.236053Z\",\"start_time\":\"2021-01-15T08:34:44.230406Z\"}}' execution_count=121}\n``` {.python .cell-code}\nset([1, 5, 2, 1, 1]).intersection(set([1, 2, 3]))\n```\n\n::: {.cell-output .cell-output-display execution_count=1086}\n```\n{1, 2}\n```\n:::\n:::\n\n\n::: {#a92ab5fe .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:44.521051Z\",\"start_time\":\"2021-01-15T08:34:44.515051Z\"}}' execution_count=122}\n``` {.python .cell-code}\nss.add('tintin')\nss\n```\n\n::: {.cell-output .cell-output-display execution_count=1087}\n```\n{1, 2, 3, 'tintin', 'toto'}\n```\n:::\n:::\n\n\n::: {#0ba86c7a .cell execution_count=123}\n``` {.python .cell-code}\nss.difference(range(6))\n```\n\n::: {.cell-output .cell-output-display execution_count=1088}\n```\n{'tintin', 'toto'}\n```\n:::\n:::\n\n\nYou can combine all containers together\n\n::: {#127713c7 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:45.317823Z\",\"start_time\":\"2021-01-15T08:34:45.310957Z\"}}' execution_count=124}\n``` {.python .cell-code}\ndd = {\n    'truc': [1, 2, 3], \n    5: (1, 4, 2),\n    (1, 3): {'hello', 'world'}\n}\ndd\n```\n\n::: {.cell-output .cell-output-display execution_count=1089}\n```\n{'truc': [1, 2, 3], 5: (1, 4, 2), (1, 3): {'hello', 'world'}}\n```\n:::\n:::\n\n\n# Assigments in `Python` is name binding\n\n## Everything is either mutable or immutable\n\n::: {#1415272f .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=125}\n``` {.python .cell-code}\nss = {1, 2, 3}\nsss = ss\nsss, ss\n```\n\n::: {.cell-output .cell-output-display execution_count=1090}\n```\n({1, 2, 3}, {1, 2, 3})\n```\n:::\n:::\n\n\n::: {#4c1f2599 .cell execution_count=126}\n``` {.python .cell-code}\nid(ss), id(sss)\n```\n\n::: {.cell-output .cell-output-display execution_count=1091}\n```\n(130264232111104, 130264232111104)\n```\n:::\n:::\n\n\n::: {#2b1f9100 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=127}\n``` {.python .cell-code}\nsss.add(\"Truc\")\n```\n:::\n\n\n**Question.** What is in `ss` ?\n\n::: {#373a5f53 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=128}\n``` {.python .cell-code}\nss, sss\n```\n\n::: {.cell-output .cell-output-display execution_count=1093}\n```\n({1, 2, 3, 'Truc'}, {1, 2, 3, 'Truc'})\n```\n:::\n:::\n\n\n`ss` and `sss` are names for the same object\n\n::: {#127d4deb .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=129}\n``` {.python .cell-code}\nid(ss), id(sss)\n```\n\n::: {.cell-output .cell-output-display execution_count=1094}\n```\n(130264232111104, 130264232111104)\n```\n:::\n:::\n\n\n::: {#e13cb32a .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=130}\n``` {.python .cell-code}\nss is sss\n```\n\n::: {.cell-output .cell-output-display execution_count=1095}\n```\nTrue\n```\n:::\n:::\n\n\n::: {#ca83bb93 .cell execution_count=131}\n``` {.python .cell-code}\nhelp('is')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nComparisons\n***********\n\nUnlike C, all comparison operations in Python have the same priority,\nwhich is lower than that of any arithmetic, shifting or bitwise\noperation.  Also unlike C, expressions like \"a < b < c\" have the\ninterpretation that is conventional in mathematics:\n\n   comparison    ::= or_expr (comp_operator or_expr)*\n   comp_operator ::= \"<\" | \">\" | \"==\" | \">=\" | \"<=\" | \"!=\"\n                     | \"is\" [\"not\"] | [\"not\"] \"in\"\n\nComparisons yield boolean values: \"True\" or \"False\". Custom *rich\ncomparison methods* may return non-boolean values. In this case Python\nwill call \"bool()\" on such value in boolean contexts.\n\nComparisons can be chained arbitrarily, e.g., \"x < y <= z\" is\nequivalent to \"x < y and y <= z\", except that \"y\" is evaluated only\nonce (but in both cases \"z\" is not evaluated at all when \"x < y\" is\nfound to be false).\n\nFormally, if *a*, *b*, *c*, …, *y*, *z* are expressions and *op1*,\n*op2*, …, *opN* are comparison operators, then \"a op1 b op2 c ... y\nopN z\" is equivalent to \"a op1 b and b op2 c and ... y opN z\", except\nthat each expression is evaluated at most once.\n\nNote that \"a op1 b op2 c\" doesn’t imply any kind of comparison between\n*a* and *c*, so that, e.g., \"x < y > z\" is perfectly legal (though\nperhaps not pretty).\n\n\nValue comparisons\n=================\n\nThe operators \"<\", \">\", \"==\", \">=\", \"<=\", and \"!=\" compare the values\nof two objects.  The objects do not need to have the same type.\n\nChapter Objects, values and types states that objects have a value (in\naddition to type and identity).  The value of an object is a rather\nabstract notion in Python: For example, there is no canonical access\nmethod for an object’s value.  Also, there is no requirement that the\nvalue of an object should be constructed in a particular way, e.g.\ncomprised of all its data attributes. Comparison operators implement a\nparticular notion of what the value of an object is.  One can think of\nthem as defining the value of an object indirectly, by means of their\ncomparison implementation.\n\nBecause all types are (direct or indirect) subtypes of \"object\", they\ninherit the default comparison behavior from \"object\".  Types can\ncustomize their comparison behavior by implementing *rich comparison\nmethods* like \"__lt__()\", described in Basic customization.\n\nThe default behavior for equality comparison (\"==\" and \"!=\") is based\non the identity of the objects.  Hence, equality comparison of\ninstances with the same identity results in equality, and equality\ncomparison of instances with different identities results in\ninequality.  A motivation for this default behavior is the desire that\nall objects should be reflexive (i.e. \"x is y\" implies \"x == y\").\n\nA default order comparison (\"<\", \">\", \"<=\", and \">=\") is not provided;\nan attempt raises \"TypeError\".  A motivation for this default behavior\nis the lack of a similar invariant as for equality.\n\nThe behavior of the default equality comparison, that instances with\ndifferent identities are always unequal, may be in contrast to what\ntypes will need that have a sensible definition of object value and\nvalue-based equality.  Such types will need to customize their\ncomparison behavior, and in fact, a number of built-in types have done\nthat.\n\nThe following list describes the comparison behavior of the most\nimportant built-in types.\n\n* Numbers of built-in numeric types (Numeric Types — int, float,\n  complex) and of the standard library types \"fractions.Fraction\" and\n  \"decimal.Decimal\" can be compared within and across their types,\n  with the restriction that complex numbers do not support order\n  comparison.  Within the limits of the types involved, they compare\n  mathematically (algorithmically) correct without loss of precision.\n\n  The not-a-number values \"float('NaN')\" and \"decimal.Decimal('NaN')\"\n  are special.  Any ordered comparison of a number to a not-a-number\n  value is false. A counter-intuitive implication is that not-a-number\n  values are not equal to themselves.  For example, if \"x =\n  float('NaN')\", \"3 < x\", \"x < 3\" and \"x == x\" are all false, while \"x\n  != x\" is true.  This behavior is compliant with IEEE 754.\n\n* \"None\" and \"NotImplemented\" are singletons.  **PEP 8** advises that\n  comparisons for singletons should always be done with \"is\" or \"is\n  not\", never the equality operators.\n\n* Binary sequences (instances of \"bytes\" or \"bytearray\") can be\n  compared within and across their types.  They compare\n  lexicographically using the numeric values of their elements.\n\n* Strings (instances of \"str\") compare lexicographically using the\n  numerical Unicode code points (the result of the built-in function\n  \"ord()\") of their characters. [3]\n\n  Strings and binary sequences cannot be directly compared.\n\n* Sequences (instances of \"tuple\", \"list\", or \"range\") can be compared\n  only within each of their types, with the restriction that ranges do\n  not support order comparison.  Equality comparison across these\n  types results in inequality, and ordering comparison across these\n  types raises \"TypeError\".\n\n  Sequences compare lexicographically using comparison of\n  corresponding elements.  The built-in containers typically assume\n  identical objects are equal to themselves.  That lets them bypass\n  equality tests for identical objects to improve performance and to\n  maintain their internal invariants.\n\n  Lexicographical comparison between built-in collections works as\n  follows:\n\n  * For two collections to compare equal, they must be of the same\n    type, have the same length, and each pair of corresponding\n    elements must compare equal (for example, \"[1,2] == (1,2)\" is\n    false because the type is not the same).\n\n  * Collections that support order comparison are ordered the same as\n    their first unequal elements (for example, \"[1,2,x] <= [1,2,y]\"\n    has the same value as \"x <= y\").  If a corresponding element does\n    not exist, the shorter collection is ordered first (for example,\n    \"[1,2] < [1,2,3]\" is true).\n\n* Mappings (instances of \"dict\") compare equal if and only if they\n  have equal \"(key, value)\" pairs. Equality comparison of the keys and\n  values enforces reflexivity.\n\n  Order comparisons (\"<\", \">\", \"<=\", and \">=\") raise \"TypeError\".\n\n* Sets (instances of \"set\" or \"frozenset\") can be compared within and\n  across their types.\n\n  They define order comparison operators to mean subset and superset\n  tests.  Those relations do not define total orderings (for example,\n  the two sets \"{1,2}\" and \"{2,3}\" are not equal, nor subsets of one\n  another, nor supersets of one another).  Accordingly, sets are not\n  appropriate arguments for functions which depend on total ordering\n  (for example, \"min()\", \"max()\", and \"sorted()\" produce undefined\n  results given a list of sets as inputs).\n\n  Comparison of sets enforces reflexivity of its elements.\n\n* Most other built-in types have no comparison methods implemented, so\n  they inherit the default comparison behavior.\n\nUser-defined classes that customize their comparison behavior should\nfollow some consistency rules, if possible:\n\n* Equality comparison should be reflexive. In other words, identical\n  objects should compare equal:\n\n     \"x is y\" implies \"x == y\"\n\n* Comparison should be symmetric. In other words, the following\n  expressions should have the same result:\n\n     \"x == y\" and \"y == x\"\n\n     \"x != y\" and \"y != x\"\n\n     \"x < y\" and \"y > x\"\n\n     \"x <= y\" and \"y >= x\"\n\n* Comparison should be transitive. The following (non-exhaustive)\n  examples illustrate that:\n\n     \"x > y and y > z\" implies \"x > z\"\n\n     \"x < y and y <= z\" implies \"x < z\"\n\n* Inverse comparison should result in the boolean negation. In other\n  words, the following expressions should have the same result:\n\n     \"x == y\" and \"not x != y\"\n\n     \"x < y\" and \"not x >= y\" (for total ordering)\n\n     \"x > y\" and \"not x <= y\" (for total ordering)\n\n  The last two expressions apply to totally ordered collections (e.g.\n  to sequences, but not to sets or mappings). See also the\n  \"total_ordering()\" decorator.\n\n* The \"hash()\" result should be consistent with equality. Objects that\n  are equal should either have the same hash value, or be marked as\n  unhashable.\n\nPython does not enforce these consistency rules. In fact, the\nnot-a-number values are an example for not following these rules.\n\n\nMembership test operations\n==========================\n\nThe operators \"in\" and \"not in\" test for membership.  \"x in s\"\nevaluates to \"True\" if *x* is a member of *s*, and \"False\" otherwise.\n\"x not in s\" returns the negation of \"x in s\".  All built-in sequences\nand set types support this as well as dictionary, for which \"in\" tests\nwhether the dictionary has a given key. For container types such as\nlist, tuple, set, frozenset, dict, or collections.deque, the\nexpression \"x in y\" is equivalent to \"any(x is e or x == e for e in\ny)\".\n\nFor the string and bytes types, \"x in y\" is \"True\" if and only if *x*\nis a substring of *y*.  An equivalent test is \"y.find(x) != -1\".\nEmpty strings are always considered to be a substring of any other\nstring, so \"\"\" in \"abc\"\" will return \"True\".\n\nFor user-defined classes which define the \"__contains__()\" method, \"x\nin y\" returns \"True\" if \"y.__contains__(x)\" returns a true value, and\n\"False\" otherwise.\n\nFor user-defined classes which do not define \"__contains__()\" but do\ndefine \"__iter__()\", \"x in y\" is \"True\" if some value \"z\", for which\nthe expression \"x is z or x == z\" is true, is produced while iterating\nover \"y\". If an exception is raised during the iteration, it is as if\n\"in\" raised that exception.\n\nLastly, the old-style iteration protocol is tried: if a class defines\n\"__getitem__()\", \"x in y\" is \"True\" if and only if there is a non-\nnegative integer index *i* such that \"x is y[i] or x == y[i]\", and no\nlower integer index raises the \"IndexError\" exception.  (If any other\nexception is raised, it is as if \"in\" raised that exception).\n\nThe operator \"not in\" is defined to have the inverse truth value of\n\"in\".\n\n\nIdentity comparisons\n====================\n\nThe operators \"is\" and \"is not\" test for an object’s identity: \"x is\ny\" is true if and only if *x* and *y* are the same object.  An\nObject’s identity is determined using the \"id()\" function.  \"x is not\ny\" yields the inverse truth value. [4]\n\nRelated help topics: EXPRESSIONS, BASICMETHODS\n\n```\n:::\n:::\n\n\n## About assigments\n\n- Python never copies an object\n- Unless you ask him to\n\nWhen you code\n```python\nx = [1, 2, 3]\ny = x\n```\nyou just\n- **bind** the variable name `x` to a list `[1, 2, 3]`\n- give another name `y` to the same object\n\n**Important remarks**\n\n- **Everything** is an object in Python\n- Either **immutable** or **mutable**\n\n::: {#cb93a0c6 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:48.640520Z\",\"start_time\":\"2021-01-15T08:34:48.635298Z\"}}' execution_count=132}\n``` {.python .cell-code}\nid(1), id(1+1), id(2)\n```\n\n::: {.cell-output .cell-output-display execution_count=1097}\n```\n(11755688, 11755720, 11755720)\n```\n:::\n:::\n\n\n**A `list` is mutable**\n\n::: {#9e360446 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=133}\n``` {.python .cell-code}\nx = [1, 2, 3]\nprint(id(x), x)\nx[0] += 42; x.append(3.14)\nprint(id(x), x)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n130262654616448 [1, 2, 3]\n130262654616448 [43, 2, 3, 3.14]\n```\n:::\n:::\n\n\n**A `str` is immutable**\n\nIn order to \"change\" an **immutable** object, Python creates a new one\n\n::: {#4d12fbfc .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:48.989090Z\",\"start_time\":\"2021-01-15T08:34:48.984655Z\"}}' execution_count=134}\n``` {.python .cell-code}\ns = 'to'\nprint(id(s), s)\ns += 'to'\nprint(id(s), s)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n130264565933536 to\n130264232170368 toto\n```\n:::\n:::\n\n\n**Once again, a `list` is mutable**\n\n::: {#981664fd .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=135}\n``` {.python .cell-code}\nsuper_list = [3.14, (1, 2, 3), 'tintin']\nother_list = super_list\nid(other_list), id(super_list)\n```\n\n::: {.cell-output .cell-output-display execution_count=1100}\n```\n(130262654617408, 130262654617408)\n```\n:::\n:::\n\n\n- `other_list` and `super_list` are the same list\n- If you change one, you change the other.\n- `id` returns the identity of an object. Two objects with the same idendity are the same (not only the same type, but the same instance)\n\n::: {#ac59225b .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:49.490066Z\",\"start_time\":\"2021-01-15T08:34:49.483598Z\"}}' execution_count=136}\n``` {.python .cell-code}\nother_list[1] = 'youps'\nother_list, super_list\n```\n\n::: {.cell-output .cell-output-display execution_count=1101}\n```\n([3.14, 'youps', 'tintin'], [3.14, 'youps', 'tintin'])\n```\n:::\n:::\n\n\n::: {#dddc11b3 .cell execution_count=137}\n``` {.python .cell-code}\nid(super_list), id(other_list)\n```\n\n::: {.cell-output .cell-output-display execution_count=1102}\n```\n(130262654617408, 130262654617408)\n```\n:::\n:::\n\n\n## If you want a copy, to need to ask for one\n\n::: {#8b670076 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:49.810775Z\",\"start_time\":\"2021-01-15T08:34:49.804825Z\"}}' execution_count=138}\n``` {.python .cell-code}\nother_list = super_list.copy()\nid(other_list), id(super_list)\n```\n\n::: {.cell-output .cell-output-display execution_count=1103}\n```\n(130262654629568, 130262654617408)\n```\n:::\n:::\n\n\n::: {#5262eb0f .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:50.044319Z\",\"start_time\":\"2021-01-15T08:34:50.038631Z\"}}' execution_count=139}\n``` {.python .cell-code}\nother_list[1] = 'copy'\nother_list, super_list\n```\n\n::: {.cell-output .cell-output-display execution_count=1104}\n```\n([3.14, 'copy', 'tintin'], [3.14, 'youps', 'tintin'])\n```\n:::\n:::\n\n\nOnly `other_list` is modified. \n\nBut... what if you have a `list` of `list` ? (or a mutable object containing mutable objects)\n\n::: {#36fc5c9b .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=140}\n``` {.python .cell-code}\nl1, l2 = [1, 2, 3], [4, 5, 6]\nlist_list = [l1, l2]\nlist_list\n```\n\n::: {.cell-output .cell-output-display execution_count=1105}\n```\n[[1, 2, 3], [4, 5, 6]]\n```\n:::\n:::\n\n\n::: {#4a346549 .cell execution_count=141}\n``` {.python .cell-code}\nid(list_list), id(list_list[0]), id(l1), list_list[0] is l1\n```\n\n::: {.cell-output .cell-output-display execution_count=1106}\n```\n(130263839347840, 130263839354048, 130263839354048, True)\n```\n:::\n:::\n\n\nLet's make a copy of `list_list`\n\n::: {#0a2b26cd .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:50.900506Z\",\"start_time\":\"2021-01-15T08:34:50.894593Z\"}}' execution_count=142}\n``` {.python .cell-code}\ncopy_list = list_list.copy()\ncopy_list.append('super')\nlist_list, copy_list\n```\n\n::: {.cell-output .cell-output-display execution_count=1107}\n```\n([[1, 2, 3], [4, 5, 6]], [[1, 2, 3], [4, 5, 6], 'super'])\n```\n:::\n:::\n\n\n::: {#5812a3cf .cell execution_count=143}\n``` {.python .cell-code}\nid(list_list[0]), id(copy_list[0])\n```\n\n::: {.cell-output .cell-output-display execution_count=1108}\n```\n(130263839354048, 130263839354048)\n```\n:::\n:::\n\n\nOK, only `copy_list` is modified, as expected\n\nBut now...\n\n::: {#8ada7b1c .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:51.550226Z\",\"start_time\":\"2021-01-15T08:34:51.545049Z\"}}' execution_count=144}\n``` {.python .cell-code}\ncopy_list[0][1] = 'oups'\ncopy_list, list_list\n```\n\n::: {.cell-output .cell-output-display execution_count=1109}\n```\n([[1, 'oups', 3], [4, 5, 6], 'super'], [[1, 'oups', 3], [4, 5, 6]])\n```\n:::\n:::\n\n\n**Question.** What happened ?!?\n\n- The `list_list` object is copied\n- But NOT what it's containing !\n- By default `copy` does a *shallow* copy, not a *deep* copy\n- It does not build copies of what is contained\n- If you want to copy an object and all that is contained in it, you need to use `deepcopy`.\n\n::: {#0be0faa2 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:52.242785Z\",\"start_time\":\"2021-01-15T08:34:52.236814Z\"}}' execution_count=145}\n``` {.python .cell-code}\nfrom copy import deepcopy\n\ncopy_list = deepcopy(list_list)\ncopy_list[0][1] = 'incredible !'\nlist_list, copy_list\n```\n\n::: {.cell-output .cell-output-display execution_count=1110}\n```\n([[1, 'oups', 3], [4, 5, 6]], [[1, 'incredible !', 3], [4, 5, 6]])\n```\n:::\n:::\n\n\n## Final remarks\n\n::: {#897f846a .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:52.389405Z\",\"start_time\":\"2021-01-15T08:34:52.384515Z\"}}' execution_count=146}\n``` {.python .cell-code}\ntt = ([1, 2, 3], [4, 5, 6])\nprint(id(tt), tt)\nprint(list(map(id, tt)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n130263839029696 ([1, 2, 3], [4, 5, 6])\n[130263839329856, 130264232036288]\n```\n:::\n:::\n\n\n::: {#353edd72 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:52.490073Z\",\"start_time\":\"2021-01-15T08:34:52.483857Z\"}}' execution_count=147}\n``` {.python .cell-code}\ntt[0][1] = '42'\nprint(id(tt), tt)\nprint(list(map(id, tt)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n130263839029696 ([1, '42', 3], [4, 5, 6])\n[130263839329856, 130264232036288]\n```\n:::\n:::\n\n\n::: {#063ff4e6 .cell execution_count=148}\n``` {.python .cell-code}\ns = [1, 2, 3]\n```\n:::\n\n\n::: {#39ade94b .cell execution_count=149}\n``` {.python .cell-code}\ns2 = s\n```\n:::\n\n\n::: {#426bd91a .cell execution_count=150}\n``` {.python .cell-code}\ns2 is s\n```\n\n::: {.cell-output .cell-output-display execution_count=1115}\n```\nTrue\n```\n:::\n:::\n\n\n::: {#12405e3c .cell execution_count=151}\n``` {.python .cell-code}\nid(s2), id(s)\n```\n\n::: {.cell-output .cell-output-display execution_count=1116}\n```\n(130263837522048, 130263837522048)\n```\n:::\n:::\n\n\n# Control flow and other stuff...\n\nNamely tests, loops, again booleans, etc.\n\n::: {#d8bd0e5e .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=152}\n``` {.python .cell-code}\nif 2 ** 2 == 5:\n    print('Obvious')\nelse:\n    print('YES')\nprint('toujours')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYES\ntoujours\n```\n:::\n:::\n\n\n## Blocks are delimited by indentation!\n\n::: {#7340046a .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:53.244482Z\",\"start_time\":\"2021-01-15T08:34:53.240054Z\"}}' execution_count=153}\n``` {.python .cell-code}\na = 3\nif a > 0:\n    if a == 1:\n        print(1)\n    elif a == 2:\n        print(2)\nelif a == 2:\n    print(2)\nelif a == 3:\n    print(3)\nelse:\n    print(a)\n```\n:::\n\n\n## Anything can be understood as a boolean\n\nFor example, don't do this to test if a list is empty\n\n::: {#d4da5d26 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:53.660533Z\",\"start_time\":\"2021-01-15T08:34:53.655820Z\"}}' execution_count=154}\n``` {.python .cell-code}\nl2 = ['hello', 'everybody']\n\nif len(l2) > 0:\n    print(l2[0])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nhello\n```\n:::\n:::\n\n\nbut this\n\n::: {#0d3d92b3 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:54.244191Z\",\"start_time\":\"2021-01-15T08:34:54.239801Z\"}}' execution_count=155}\n``` {.python .cell-code}\nif l2:\n    print(l2[0])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nhello\n```\n:::\n:::\n\n\n**Some poetry**\n\n- An empty `dict` is `False`\n- An empty `string` is `False`\n- An empty `list` is `False`\n- An empty `tuple` is `False`\n- An empty `set` is `False`\n- `0` is `False`\n- `.0` is `False`\n- etc...\n- everything else is `True`\n\n::: {#b2388561 .cell execution_count=156}\n``` {.python .cell-code}\n# %%\n[bool(x) for x in ['', False, 0, [], {}, set(), dict(), {'': 0}]]\n```\n\n::: {.cell-output .cell-output-display execution_count=1121}\n```\n[False, False, False, False, False, False, False, True]\n```\n:::\n:::\n\n\n## While loops\n\n::: {#0bcc1c82 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:55.427330Z\",\"start_time\":\"2021-01-15T08:34:55.422079Z\"}}' execution_count=157}\n``` {.python .cell-code}\na = 10\nb = 1\nwhile b < a:\n    b = b + 1\n    print(b)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n2\n3\n4\n5\n6\n7\n8\n9\n10\n```\n:::\n:::\n\n\nCompute the decimals of Pi using the Wallis formulae\n\n$$\n\\pi = 2 \\lim_{n \\to \\infty} \\prod_{i=1}^{n} \\frac{4i^2}{4i^2 - 1}\n$$\n\n::: {#9c8f5bca .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:55.901297Z\",\"start_time\":\"2021-01-15T08:34:55.815952Z\"}}' execution_count=158}\n``` {.python .cell-code}\nfrom math import pi\n\n\npi_approx = 2\neps = 1e-10\ndif = 2 * eps\ni = 1\nwhile dif > eps:\n    pi_approx, i, old_pi = pi_approx * 4 * i ** 2 / (4 * i ** 2 - 1), i + 1, pi_approx\n    dif = pi_approx - old_pi\nelse:\n    print(f'After {i} iterations, the difference between the approximation and the target is  {pi_approx-pi}')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nAfter 88624 iterations, the difference between the approximation and the target is  -8.862175937540684e-06\n```\n:::\n:::\n\n\n##  `for` loop with `range`\n\n- Iteration with an index, with a list, with many things !\n- `range` has the same parameters as with slicing `start:end:stride`, all parameters being optional\n\n::: {#2781aae1 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:34:57.074626Z\",\"start_time\":\"2021-01-15T08:34:57.068953Z\"}}' execution_count=159}\n``` {.python .cell-code}\nfor i in range(10):\n    print(i)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n```\n:::\n:::\n\n\n::: {#865a9a90 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=160}\n``` {.python .cell-code}\nfor i in range(4):\n    print(i + 1)\nprint('-')\n\nfor i in range(1, 5):\n    print(i)\nprint('-')\n\nfor i in range(1, 10, 3):\n    print(i)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1\n2\n3\n4\n-\n1\n2\n3\n4\n-\n1\n4\n7\n```\n:::\n:::\n\n\n*Something for nerds*. You can use `else` in a `for` loop\n\n::: {#6f2a5bbc .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:03.792632Z\",\"start_time\":\"2021-01-15T08:35:03.788211Z\"}}' execution_count=161}\n``` {.python .cell-code}\nnames = ['gaston', 'mokhtar', 'jaouad', 'simon', 'yiyang']\n\nfor name in names:\n    if name.startswith('u'):\n        print(name)\n        break\nelse:\n    print('Not found.')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNot found.\n```\n:::\n:::\n\n\n::: {#1cb7579b .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:11.089072Z\",\"start_time\":\"2021-01-15T08:35:11.084070Z\"}}' execution_count=162}\n``` {.python .cell-code}\nnames = ['gaston', 'mokhtar', 'jaouad', 'ulysse', 'simon', 'yiyang']\n\nfor name in names:\n    if name.startswith('u'):\n        print(name)\n        break\nelse:\n    print('Not found.')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nulysse\n```\n:::\n:::\n\n\n## For loops over iterable objects\n\nYou can iterate using `for` over any container: `list`, `tuple`, `dict`, `str`, `set` among others...\n\n::: {#6a0886aa .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:14.358404Z\",\"start_time\":\"2021-01-15T08:35:14.354354Z\"}}' execution_count=163}\n``` {.python .cell-code}\ncolors = ['red', 'blue', 'black', 'white']\npeoples = ['gaston', 'jaouad', 'mokhtar', 'yiyang', 'rémi']\n```\n:::\n\n\n::: {#933494cb .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:14.546348Z\",\"start_time\":\"2021-01-15T08:35:14.541964Z\"}}' execution_count=164}\n``` {.python .cell-code}\n# This is stupid\nfor i in range(len(colors)):\n    print(colors[i])\n    \n# This is better\nfor color in colors:\n    print(color)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nred\nblue\nblack\nwhite\nred\nblue\nblack\nwhite\n```\n:::\n:::\n\n\nTo iterate over several sequences at the same time, use `zip`\n\n::: {#615613e7 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:15.578703Z\",\"start_time\":\"2021-01-15T08:35:15.574575Z\"}}' execution_count=165}\n``` {.python .cell-code}\nfor color, people in zip(colors, peoples):\n    print(color, people)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nred gaston\nblue jaouad\nblack mokhtar\nwhite yiyang\n```\n:::\n:::\n\n\n::: {#9b3a7d44 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=166}\n``` {.python .cell-code}\nl = [\"Bonjour\", {'francis': 5214, 'gaston': 5123}, ('truc', 3)]\nfor e in l:\n    print(e, len(e))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nBonjour 7\n{'francis': 5214, 'gaston': 5123} 2\n('truc', 3) 2\n```\n:::\n:::\n\n\n**Loop over a `str`**\n\n::: {#9a63b7ee .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:16.284944Z\",\"start_time\":\"2021-01-15T08:35:16.279583Z\"}}' execution_count=167}\n``` {.python .cell-code}\ns = 'Bonjour'\nfor c in s:\n    print(c)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nB\no\nn\nj\no\nu\nr\n```\n:::\n:::\n\n\n**Loop over a `dict`**\n\n::: {#32a8522a .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:24.915816Z\",\"start_time\":\"2021-01-15T08:35:24.910552Z\"}}' execution_count=168}\n``` {.python .cell-code}\ndd = {(1, 3): {'hello', 'world'}, 'truc': [1, 2, 3], 5: (1, 4, 2)}\n\n# Default is to loop over keys\nfor key in dd:\n    print(key)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(1, 3)\ntruc\n5\n```\n:::\n:::\n\n\n::: {#09019e90 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:25.116664Z\",\"start_time\":\"2021-01-15T08:35:25.112459Z\"}}' execution_count=169}\n``` {.python .cell-code}\n# Loop over values\nfor e in dd.values():\n    print(e)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{'world', 'hello'}\n[1, 2, 3]\n(1, 4, 2)\n```\n:::\n:::\n\n\n::: {#9f8a7ed2 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:25.253625Z\",\"start_time\":\"2021-01-15T08:35:25.248561Z\"}}' execution_count=170}\n``` {.python .cell-code}\n# Loop over items (key, value) pairs\nfor key, val in dd.items():\n    print(key, val)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(1, 3) {'world', 'hello'}\ntruc [1, 2, 3]\n5 (1, 4, 2)\n```\n:::\n:::\n\n\n::: {#b18a72b1 .cell execution_count=171}\n``` {.python .cell-code}\nfor t in dd.items():\n    print(t)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n((1, 3), {'world', 'hello'})\n('truc', [1, 2, 3])\n(5, (1, 4, 2))\n```\n:::\n:::\n\n\n## Comprehensions\n\nYou can construct a `list`, `dict`, `set` and others using the **comprehension** syntax\n\n**`list` comprehension**\n\n::: {#4308d426 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:27.023136Z\",\"start_time\":\"2021-01-15T08:35:27.016816Z\"}}' execution_count=172}\n``` {.python .cell-code}\nprint(colors)\nprint(peoples)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['red', 'blue', 'black', 'white']\n['gaston', 'jaouad', 'mokhtar', 'yiyang', 'rémi']\n```\n:::\n:::\n\n\n::: {#33ea2537 .cell execution_count=173}\n``` {.python .cell-code}\nl = []\nfor p, c in zip(peoples, colors):\n    if len(c)<=4 :\n        l.append(p)\nprint(l)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['gaston', 'jaouad']\n```\n:::\n:::\n\n\n::: {#e18eb70d .cell execution_count=174}\n``` {.python .cell-code}\n# The list of people with favorite color that has no more than 4 characters\n\n[people for color, people in zip(colors, peoples) if len(color) <= 4]\n```\n\n::: {.cell-output .cell-output-display execution_count=1139}\n```\n['gaston', 'jaouad']\n```\n:::\n:::\n\n\n**`dict` comprehension**\n\n::: {#e82950c6 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:29.425720Z\",\"start_time\":\"2021-01-15T08:35:29.418729Z\"}}' execution_count=175}\n``` {.python .cell-code}\n{people: color for color, people in zip(colors, peoples) if len(color) <= 4}\n```\n\n::: {.cell-output .cell-output-display execution_count=1140}\n```\n{'gaston': 'red', 'jaouad': 'blue'}\n```\n:::\n:::\n\n\n::: {#9c2fa668 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=176}\n``` {.python .cell-code}\n# Allows to build a dict from two lists (for keys and values)\n{key: value for (key, value) in zip(peoples, colors)}\n```\n\n::: {.cell-output .cell-output-display execution_count=1141}\n```\n{'gaston': 'red', 'jaouad': 'blue', 'mokhtar': 'black', 'yiyang': 'white'}\n```\n:::\n:::\n\n\n::: {#efc0f452 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:29.733037Z\",\"start_time\":\"2021-01-15T08:35:29.728275Z\"}}' execution_count=177}\n``` {.python .cell-code}\n# But it's simpler (so better) to use\ndict(zip(peoples, colors))\n```\n\n::: {.cell-output .cell-output-display execution_count=1142}\n```\n{'gaston': 'red', 'jaouad': 'blue', 'mokhtar': 'black', 'yiyang': 'white'}\n```\n:::\n:::\n\n\nSomething very convenient is `enumerate`\n\n::: {#d80604ed .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:34.108535Z\",\"start_time\":\"2021-01-15T08:35:34.101660Z\"}}' execution_count=178}\n``` {.python .cell-code}\nfor i, color in enumerate(colors):\n    print(i, color)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0 red\n1 blue\n2 black\n3 white\n```\n:::\n:::\n\n\n::: {#4f811165 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:34.308091Z\",\"start_time\":\"2021-01-15T08:35:34.302386Z\"}}' execution_count=179}\n``` {.python .cell-code}\nlist(enumerate(colors))\n```\n\n::: {.cell-output .cell-output-display execution_count=1144}\n```\n[(0, 'red'), (1, 'blue'), (2, 'black'), (3, 'white')]\n```\n:::\n:::\n\n\n::: {#5794b764 .cell execution_count=180}\n``` {.python .cell-code}\ndict(enumerate(s))\n```\n\n::: {.cell-output .cell-output-display execution_count=1145}\n```\n{0: 'B', 1: 'o', 2: 'n', 3: 'j', 4: 'o', 5: 'u', 6: 'r'}\n```\n:::\n:::\n\n\n::: {#86cfddf5 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=181}\n``` {.python .cell-code}\nprint(dict(enumerate(s)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{0: 'B', 1: 'o', 2: 'n', 3: 'j', 4: 'o', 5: 'u', 6: 'r'}\n```\n:::\n:::\n\n\n::: {#c0a60d60 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:35.307514Z\",\"start_time\":\"2021-01-15T08:35:35.302402Z\"}}' execution_count=182}\n``` {.python .cell-code}\ns = 'Hey everyone'\n{c: i for i, c in enumerate(s)}\n```\n\n::: {.cell-output .cell-output-display execution_count=1147}\n```\n{'H': 0, 'e': 11, 'y': 8, ' ': 3, 'v': 5, 'r': 7, 'o': 9, 'n': 10}\n```\n:::\n:::\n\n\n## About functional programming\n\nWe can use `lambda` to define **anonymous** functions, and use them in the `map` and `reduce` functions\n\n::: {#a9a154ae .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:37.077273Z\",\"start_time\":\"2021-01-15T08:35:37.071704Z\"}}' execution_count=183}\n``` {.python .cell-code}\nsquare = lambda x: x ** 2\nsquare(2)\n```\n\n::: {.cell-output .cell-output-display execution_count=1148}\n```\n4\n```\n:::\n:::\n\n\n::: {#dd3de9cd .cell execution_count=184}\n``` {.python .cell-code}\ntype(square)\n```\n\n::: {.cell-output .cell-output-display execution_count=1149}\n```\nfunction\n```\n:::\n:::\n\n\n::: {#52f2982d .cell execution_count=185}\n``` {.python .cell-code}\ndir(square)\n```\n\n::: {.cell-output .cell-output-display execution_count=1150}\n```\n['__annotations__',\n '__builtins__',\n '__call__',\n '__class__',\n '__closure__',\n '__code__',\n '__defaults__',\n '__delattr__',\n '__dict__',\n '__dir__',\n '__doc__',\n '__eq__',\n '__format__',\n '__ge__',\n '__get__',\n '__getattribute__',\n '__getstate__',\n '__globals__',\n '__gt__',\n '__hash__',\n '__init__',\n '__init_subclass__',\n '__kwdefaults__',\n '__le__',\n '__lt__',\n '__module__',\n '__name__',\n '__ne__',\n '__new__',\n '__qualname__',\n '__reduce__',\n '__reduce_ex__',\n '__repr__',\n '__setattr__',\n '__sizeof__',\n '__str__',\n '__subclasshook__',\n '__type_params__']\n```\n:::\n:::\n\n\n::: {#02fb2cbc .cell execution_count=186}\n``` {.python .cell-code}\ns = \"a\"\n```\n:::\n\n\n::: {#a5498150 .cell execution_count=187}\n``` {.python .cell-code}\ntry:\n    square(\"a\")\nexcept TypeError:\n    print(\"TypeError: unsupported operand type(s) for ** or pow(): 'str' and 'int'\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTypeError: unsupported operand type(s) for ** or pow(): 'str' and 'int'\n```\n:::\n:::\n\n\n::: {#76680530 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:37.269771Z\",\"start_time\":\"2021-01-15T08:35:37.265389Z\"}}' execution_count=188}\n``` {.python .cell-code}\nsum2 = lambda a, b: a + b\nprint(sum2('Hello', ' world'))\nprint(sum2(1, 2))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nHello world\n3\n```\n:::\n:::\n\n\nIntended for short and one-line function. \n\nMore complex functions use `def` (see below)\n\n## Exercise\n\nPrint the squares of even numbers between 0 et 15\n\n1. Using a list comprehension as before\n2. Using `map`\n\n::: {.content-visible when-profile='solution'} \n\n::: {#ead592f8 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=189}\n``` {.python .cell-code}\n# Answer to 1.\n[i ** 2 for i in range(15) if i % 2 == 0]\n```\n\n::: {.cell-output .cell-output-display execution_count=1154}\n```\n[0, 4, 16, 36, 64, 100, 144, 196]\n```\n:::\n:::\n\n\n::: {#89891081 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=190}\n``` {.python .cell-code}\n# Answer to 2. \nlist(map(lambda x: x ** 2, range(0, 15, 2)))\n```\n\n::: {.cell-output .cell-output-display execution_count=1155}\n```\n[0, 4, 16, 36, 64, 100, 144, 196]\n```\n:::\n:::\n\n\n**Remark**. We will see later why we need to use `list` above\n\n::: {#2451120e .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:49.386681Z\",\"start_time\":\"2021-01-15T08:35:49.380699Z\"}}' execution_count=191}\n``` {.python .cell-code}\nmap(lambda x: x ** 2, range(0, 15, 2))\n```\n\n::: {.cell-output .cell-output-display execution_count=1156}\n```\n<map at 0x767923434820>\n```\n:::\n:::\n\n\nNow, to get the sum of these squares, we can use `sum`\n\n::: {#e9318aba .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:49.730719Z\",\"start_time\":\"2021-01-15T08:35:49.725389Z\"}}' execution_count=192}\n``` {.python .cell-code}\nsum(map(lambda x: x ** 2, range(0, 15, 2)))\n```\n\n::: {.cell-output .cell-output-display execution_count=1157}\n```\n560\n```\n:::\n:::\n\n\nWe can also use `reduce` (not a good idea here, but it's good to know that it exists)\n\n::: {#7919edf8 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:50.125792Z\",\"start_time\":\"2021-01-15T08:35:50.119351Z\"}}' execution_count=193}\n``` {.python .cell-code}\nfrom functools import reduce\n\nreduce(lambda a, b: a + b, map(lambda x: x ** 2, range(0, 15, 2)))\n```\n\n::: {.cell-output .cell-output-display execution_count=1158}\n```\n560\n```\n:::\n:::\n\n\nThere is also something that can be useful in `functool` called `partial`\n\nIt allows to **simplify** functions by freezing some arguments\n\n::: {#2e587884 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=194}\n``` {.python .cell-code}\nfrom functools import partial\n\ndef mult(a, b):\n    return a * b\n\ndouble = partial(mult, b=2)\ndouble(2) \n```\n\n::: {.cell-output .cell-output-display execution_count=1159}\n```\n4\n```\n:::\n:::\n\n\n:::\n\n## Brain-teasing\n\nWhat is the output of\n\n::: {#be1e21c5 .cell execution_count=195}\n``` {.python .cell-code}\nreduce(lambda a, b: a + b[0] * b[1], enumerate('abcde'), 'A')\n```\n:::\n\n\n::: {.content-visible when-profile='solution'} \n\n::: {#0d53fc40 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=196}\n``` {.python .cell-code}\nreduce(lambda a, b: a + b[0] * b[1], enumerate('abcde'), 'A')\n```\n\n::: {.cell-output .cell-output-display execution_count=1160}\n```\n'Abccdddeeee'\n```\n:::\n:::\n\n\nThis does the following\n\n::: {#c1ef43e0 .cell execution_count=197}\n``` {.python .cell-code}\nlist(enumerate('abcde'))\n```\n\n::: {.cell-output .cell-output-display execution_count=1161}\n```\n[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd'), (4, 'e')]\n```\n:::\n:::\n\n\n::: {#b70b7178 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:35:55.504410Z\",\"start_time\":\"2021-01-15T08:35:55.498980Z\"}}' execution_count=198}\n``` {.python .cell-code}\n((((('A' + 0 * 'a') + 1 * 'b') + 2 * 'c') + 3 * 'd') + 4 * 'e')\n```\n\n::: {.cell-output .cell-output-display execution_count=1162}\n```\n'Abccdddeeee'\n```\n:::\n:::\n\n\n:::\n\n\n# Generators\n\n::: {#5a4988a1 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=199}\n``` {.python .cell-code}\nimport sys\nimport matplotlib.pyplot as plt\n%matplotlib inline\n```\n:::\n\n\n::: {#8e6f96e0 .cell execution_count=200}\n``` {.python .cell-code}\nplt.figure(figsize=(6, 6))\nplt.plot([sys.getsizeof(list(range(i))) for i in range(10000)], lw=3)\nplt.plot([sys.getsizeof(range(i)) for i in range(10000)], lw=3)\nplt.xlabel('Number of elements (value of i)', fontsize=14)\nplt.ylabel('Size (in bytes)', fontsize=14)\n_ = plt.legend(['list(range(i))', 'range(i)'], fontsize=16)\n```\n\n::: {.cell-output .cell-output-display}\n![](notebook01_python_files/figure-html/cell-201-output-1.png){width=542 height=509}\n:::\n:::\n\n\n## Why generators ?\n\nThe memory used by `range(i)` does not scale linearly with `i`\n\nWhat is happening ?\n\n- `range(n)` does not allocate a list of `n` elements ! \n- It **generates on the fly** the list of required integers\n- We say that such an object behaves like a **generator** in `Python`\n- Many things in the `Python` standard library behaves like this\n\n\n**Warning.** Getting the real memory footprint of a `Python` object is difficult. \nNote that `sizeof` calls the `__sizeof__` method of `r`, which does not give in general the actual memory used by an object. But nevermind here.\n\nThe following computation has no memory footprint:\n\n::: {#9f21d816 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=201}\n``` {.python .cell-code}\nsum(range(10**8))\n```\n\n::: {.cell-output .cell-output-display execution_count=1165}\n```\n4999999950000000\n```\n:::\n:::\n\n\n::: {#80379e2d .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:17.541785Z\",\"start_time\":\"2021-01-15T08:36:17.537229Z\"}}' execution_count=202}\n``` {.python .cell-code}\nmap(lambda x: x**2, range(10**7))\n```\n\n::: {.cell-output .cell-output-display execution_count=1166}\n```\n<map at 0x7679813fb370>\n```\n:::\n:::\n\n\n`map` does not return a `list` for the same reason\n\n::: {#205bcbda .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:17.817857Z\",\"start_time\":\"2021-01-15T08:36:17.544451Z\"}}' execution_count=203}\n``` {.python .cell-code}\nsum(map(lambda x: x**2, range(10**6)))\n```\n\n::: {.cell-output .cell-output-display execution_count=1167}\n```\n333332833333500000\n```\n:::\n:::\n\n\n## Generator expression\n\nNamely generators defined through comprehensions.\nJust replace `[]` by `()` in the comprehension.\n\nA generator can be iterated on only **once**\n\n::: {#a26db58a .cell execution_count=204}\n``` {.python .cell-code}\nrange(10)\n```\n\n::: {.cell-output .cell-output-display execution_count=1168}\n```\nrange(0, 10)\n```\n:::\n:::\n\n\n::: {#97fa1fde .cell execution_count=205}\n``` {.python .cell-code}\ncarres = (i**2 for i in range(10))\n```\n:::\n\n\n::: {#8d523cad .cell execution_count=206}\n``` {.python .cell-code}\ncarres\n```\n\n::: {.cell-output .cell-output-display execution_count=1170}\n```\n<generator object <genexpr> at 0x767920f50a00>\n```\n:::\n:::\n\n\n::: {#8c9d5613 .cell execution_count=207}\n``` {.python .cell-code}\nfor c in carres:\n    print(c)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0\n1\n4\n9\n16\n25\n36\n49\n64\n81\n```\n:::\n:::\n\n\n::: {#ea82a153 .cell execution_count=208}\n``` {.python .cell-code}\nfor i in range(4):\n    for j in range(3):\n        print(i, j)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0 0\n0 1\n0 2\n1 0\n1 1\n1 2\n2 0\n2 1\n2 2\n3 0\n3 1\n3 2\n```\n:::\n:::\n\n\n::: {#e138f16b .cell execution_count=209}\n``` {.python .cell-code}\nfrom itertools import product\n\nfor t in product(range(4), range(3)):\n    print(t)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(0, 0)\n(0, 1)\n(0, 2)\n(1, 0)\n(1, 1)\n(1, 2)\n(2, 0)\n(2, 1)\n(2, 2)\n(3, 0)\n(3, 1)\n(3, 2)\n```\n:::\n:::\n\n\n::: {#7e0f5bbd .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:19.688387Z\",\"start_time\":\"2021-01-15T08:36:19.683024Z\"}}' execution_count=210}\n``` {.python .cell-code}\nfrom itertools import product\n\ngene = (i + j for i, j in product(range(3), range(3)))\ngene\n```\n\n::: {.cell-output .cell-output-display execution_count=1174}\n```\n<generator object <genexpr> at 0x767920f50d40>\n```\n:::\n:::\n\n\n::: {#08061d70 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:19.886398Z\",\"start_time\":\"2021-01-15T08:36:19.879904Z\"}}' execution_count=211}\n``` {.python .cell-code}\nprint(list(gene))\nprint(list(gene))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[0, 1, 2, 1, 2, 3, 2, 3, 4]\n[]\n```\n:::\n:::\n\n\n## `yield`\n\nSomething very powerful\n\n::: {#bcad1279 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:21.518680Z\",\"start_time\":\"2021-01-15T08:36:21.514939Z\"}}' execution_count=212}\n``` {.python .cell-code}\ndef startswith(words, letter):\n    for word in words:\n        if word.startswith(letter):\n            yield word\n```\n:::\n\n\n::: {#b3cfbe59 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:21.681758Z\",\"start_time\":\"2021-01-15T08:36:21.676154Z\"}}' execution_count=213}\n``` {.python .cell-code}\nwords = [\n    'Python', \"is\", 'awesome', 'in', 'particular', 'generators', \n    'are', 'really', 'cool', 'indeed'\n]\n```\n:::\n\n\n::: {#a1dc4d2c .cell execution_count=214}\n``` {.python .cell-code}\nwg = startswith(words, \"i\")\n\ntype(wg)\n```\n\n::: {.cell-output .cell-output-display execution_count=1178}\n```\ngenerator\n```\n:::\n:::\n\n\nThe generator can be used in a list comprehension.\n\n::: {#a63a1e4b .cell execution_count=215}\n``` {.python .cell-code}\nlist(word for word in wg)\n```\n\n::: {.cell-output .cell-output-display execution_count=1179}\n```\n['is', 'in', 'indeed']\n```\n:::\n:::\n\n\nBut also with a `for` loop\n\n::: {#7fa9c364 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:25.112354Z\",\"start_time\":\"2021-01-15T08:36:25.107107Z\"}}' execution_count=216}\n``` {.python .cell-code}\nfor word in startswith(words, letter='a'):\n    print(word)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nawesome\nare\n```\n:::\n:::\n\n\n::: {#28fbe6c0 .cell execution_count=217}\n``` {.python .cell-code}\nit = startswith(words, letter='a')\n```\n:::\n\n\n::: {#63346cf4 .cell execution_count=218}\n``` {.python .cell-code}\ntype(it)\n```\n\n::: {.cell-output .cell-output-display execution_count=1182}\n```\ngenerator\n```\n:::\n:::\n\n\n::: {#c0a7f9bc .cell execution_count=219}\n``` {.python .cell-code}\nnext(it)\n```\n\n::: {.cell-output .cell-output-display execution_count=1183}\n```\n'awesome'\n```\n:::\n:::\n\n\n::: {#c841bb71 .cell execution_count=220}\n``` {.python .cell-code}\nnext(it)\n```\n\n::: {.cell-output .cell-output-display execution_count=1184}\n```\n'are'\n```\n:::\n:::\n\n\n::: {#2d8e3c69 .cell execution_count=221}\n``` {.python .cell-code}\ntry:\n    next(it)\nexcept StopIteration:\n    print(\"StopIteration exception!\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nStopIteration exception!\n```\n:::\n:::\n\n\n## Exercise\n\nPlot the approximation error of Wallis approximations of $\\pi$ as a function of the number of iterations. Use logarithmic scales, on both axes.  \n\n::: {.content-visible unless-profile=\"solution\"}\n\n::: {#1b2c1f26 .cell execution_count=222}\n``` {.python .cell-code}\n# your code\n```\n:::\n\n\n:::\n\n\n::: {.content-visible when-profile=\"solution\"}\n\n::: {#c6a9b8e9 .cell execution_count=223}\n``` {.python .cell-code}\ndef wallis_gen():\n    pi_approx, i = 2, 1\n\n    yield i, pi_approx\n    while True:\n        inext = 10 * i\n        while i < inext:\n            pi_approx, i = pi_approx * 4 * i ** 2 / (4 * i ** 2 - 1), i + 1\n        else:\n            yield i, pi_approx        \n```\n:::\n\n\n::: {#ebf37b8f .cell execution_count=224}\n``` {.python .cell-code}\ng = wallis_gen()\n\nl = [next(g) for i in range(9)]\n```\n:::\n\n\n::: {#0aed1fff .cell execution_count=225}\n``` {.python .cell-code}\nimport numpy as np\n\nx_array, y_array = np.array(list(zip(*l)))\nx_array = np.log10(x_array)\ny_array =np.log10(np.pi-y_array)\n```\n:::\n\n\n::: {#6075bdd7 .cell execution_count=226}\n``` {.python .cell-code}\nplt.figure(figsize=(6, 6))\nplt.plot(x_array, y_array, lw=2)\nplt.xlabel('Number of iterations', fontsize=14)\nplt.ylabel('Wallis approximation error', fontsize=14)\nplt.grid(True, alpha=0.3)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![Convergence of Wallis approxmation](notebook01_python_files/figure-html/cell-227-output-1.png){width=518 height=509}\n:::\n:::\n\n\n:::\n\n\nSee [@ramalho_fluent_2022, Chapter 17, Iterators, Generators, and Classic Coroutines] \n\n# A glimpse at the ` collections` module\n\n(This is where the good stuff hides)\n\n::: {#18c4bace .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=227}\n``` {.python .cell-code}\ntexte = \"\"\"             \nBonjour,\nPython c'est super.\nPython ca a l'air quand même un peu compliqué.\nMais bon, ca a l'air pratique.\nPeut-être que je pourrais m'en servir pour faire des trucs super.\n\"\"\"\ntexte\n```\n\n::: {.cell-output .cell-output-display execution_count=1191}\n```\n\"             \\nBonjour,\\nPython c'est super.\\nPython ca a l'air quand même un peu compliqué.\\nMais bon, ca a l'air pratique.\\nPeut-être que je pourrais m'en servir pour faire des trucs super.\\n\"\n```\n:::\n:::\n\n\n::: {#a9acb91f .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:28.485696Z\",\"start_time\":\"2021-01-15T08:36:28.481795Z\"}}' execution_count=228}\n``` {.python .cell-code}\nprint(texte)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n             \nBonjour,\nPython c'est super.\nPython ca a l'air quand même un peu compliqué.\nMais bon, ca a l'air pratique.\nPeut-être que je pourrais m'en servir pour faire des trucs super.\n\n```\n:::\n:::\n\n\n::: {#a9d4587c .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=229}\n``` {.python .cell-code}\n# Some very basic text preprocessing \nnew_text = (\n    texte\n    .strip()\n    .replace('\\n', ' ')\n    .replace(',', ' ')\n    .replace('.', ' ')\n    .replace(\"'\", ' ')\n)\n\nprint(new_text)\nprint('-' * 8)\n\nwords = new_text.split()\nprint(words)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nBonjour  Python c est super  Python ca a l air quand même un peu compliqué  Mais bon  ca a l air pratique  Peut-être que je pourrais m en servir pour faire des trucs super \n--------\n['Bonjour', 'Python', 'c', 'est', 'super', 'Python', 'ca', 'a', 'l', 'air', 'quand', 'même', 'un', 'peu', 'compliqué', 'Mais', 'bon', 'ca', 'a', 'l', 'air', 'pratique', 'Peut-être', 'que', 'je', 'pourrais', 'm', 'en', 'servir', 'pour', 'faire', 'des', 'trucs', 'super']\n```\n:::\n:::\n\n\n## Exercise \n\nCount the number of occurences of all the words in `words`. \n\nOutput must be a dictionary containg ``word: count``\n\n::: {#89d928e6 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:30.579563Z\",\"start_time\":\"2021-01-15T08:36:30.573645Z\"}}' execution_count=230}\n``` {.python .cell-code}\nprint(words)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['Bonjour', 'Python', 'c', 'est', 'super', 'Python', 'ca', 'a', 'l', 'air', 'quand', 'même', 'un', 'peu', 'compliqué', 'Mais', 'bon', 'ca', 'a', 'l', 'air', 'pratique', 'Peut-être', 'que', 'je', 'pourrais', 'm', 'en', 'servir', 'pour', 'faire', 'des', 'trucs', 'super']\n```\n:::\n:::\n\n\n::: {.content-visible when-profile='solution'} \n\n### Solution 1: hand-made\n\n::: {#f0d6a126 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=231}\n``` {.python .cell-code}\nwords_counts = {}\nfor word in words:\n    if word in words_counts:\n        words_counts[word] += 1\n    else:\n        words_counts[word] = 1\n\nprint(words_counts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{'Bonjour': 1, 'Python': 2, 'c': 1, 'est': 1, 'super': 2, 'ca': 2, 'a': 2, 'l': 2, 'air': 2, 'quand': 1, 'même': 1, 'un': 1, 'peu': 1, 'compliqué': 1, 'Mais': 1, 'bon': 1, 'pratique': 1, 'Peut-être': 1, 'que': 1, 'je': 1, 'pourrais': 1, 'm': 1, 'en': 1, 'servir': 1, 'pour': 1, 'faire': 1, 'des': 1, 'trucs': 1}\n```\n:::\n:::\n\n\n:::\n\n::: {.content-visible when-profile='solution'} \n\n### Solution 2: using `defaultdict`\n\n::: {#e7bd8c89 .cell execution_count=232}\n``` {.python .cell-code}\nint()\n```\n\n::: {.cell-output .cell-output-display execution_count=1196}\n```\n0\n```\n:::\n:::\n\n\n::: {#a2e88f18 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=233}\n``` {.python .cell-code}\nfrom collections import defaultdict\n\nwords_counts = defaultdict(int)\nfor word in words:\n    words_counts[word] += 1\n\nprint(words_counts)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ndefaultdict(<class 'int'>, {'Bonjour': 1, 'Python': 2, 'c': 1, 'est': 1, 'super': 2, 'ca': 2, 'a': 2, 'l': 2, 'air': 2, 'quand': 1, 'même': 1, 'un': 1, 'peu': 1, 'compliqué': 1, 'Mais': 1, 'bon': 1, 'pratique': 1, 'Peut-être': 1, 'que': 1, 'je': 1, 'pourrais': 1, 'm': 1, 'en': 1, 'servir': 1, 'pour': 1, 'faire': 1, 'des': 1, 'trucs': 1})\n```\n:::\n:::\n\n\n- `defaultdict` can be extremely useful\n- A dict with a default value: here an `int` is created (defaults to 0) if key is not found\n- Allows to avoid a test\n\n### About `defaultdict`\n\n- the argument must be a \"callable\" (something that can be called)\n- Beware: as soon as a key is searched, a default value is added to the `defaultdict`\n\n::: {#ad215ce3 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:43.344984Z\",\"start_time\":\"2021-01-15T08:36:43.340012Z\"}}' execution_count=234}\n``` {.python .cell-code}\naddresses = defaultdict(lambda: 'unknown')\naddresses['huyen']\naddresses['gaston'] = '8 place Aurelie Nemours'\nprint(addresses)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ndefaultdict(<function <lambda> at 0x767920fd98a0>, {'huyen': 'unknown', 'gaston': '8 place Aurelie Nemours'})\n```\n:::\n:::\n\n\n::: {#5143ab76 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:36:43.539021Z\",\"start_time\":\"2021-01-15T08:36:43.533855Z\"}}' execution_count=235}\n``` {.python .cell-code}\n# Somewhat nasty...\nprint('jean-francois' in addresses)\nprint(addresses['jean-francois'])\nprint('jean-francois' in addresses)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nFalse\nunknown\nTrue\n```\n:::\n:::\n\n\n:::\n\n::: {.content-visible when-profile='solution'} \n\n### Solution 3. Don't do it by hand ! Use `counter`\n\n::: {#6b3402ac .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=236}\n``` {.python .cell-code}\nfrom collections import Counter\n\nprint(dict(Counter(words)))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{'Bonjour': 1, 'Python': 2, 'c': 1, 'est': 1, 'super': 2, 'ca': 2, 'a': 2, 'l': 2, 'air': 2, 'quand': 1, 'même': 1, 'un': 1, 'peu': 1, 'compliqué': 1, 'Mais': 1, 'bon': 1, 'pratique': 1, 'Peut-être': 1, 'que': 1, 'je': 1, 'pourrais': 1, 'm': 1, 'en': 1, 'servir': 1, 'pour': 1, 'faire': 1, 'des': 1, 'trucs': 1}\n```\n:::\n:::\n\n\n`Counter` counts the number of occurences of all objects in an iterable\n\n**Question.** Which one do you prefer ?\n\n- The `Counter` one right ?\n\n\n**Suggestion** : query  your chatbot with a prompt like \n\n```\nI have an iterable containing strings (says words), I want to output a dictionary with keys made of elements of my iterable and values equal to the number of occurrences of the key in the iterable. How can I do that?\n```\n\n### Morality\n\n- When you need to do something, assume that there is a tool to do it directly \n\n- If you can't find it, ask `google`, `stackoverflow`, or your favorite AIs\n\n- Otherwise, try to do it as simply as possible\n\n:::\n\n## Exercise \n\nCompute the number of occurences AND the length of each word in `words`.\n\nOutput must be a dictionary containing ``word: (count, length)``\n\n\n::: {.content-visible when-profile='solution'} \n\n### Solution\n\n::: {#147f1cc9 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=237}\n``` {.python .cell-code}\nfrom collections import Counter\n\n{word: (count, len(word)) for word, count in Counter(words).items()}\n```\n\n::: {.cell-output .cell-output-display execution_count=1201}\n```\n{'Bonjour': (1, 7),\n 'Python': (2, 6),\n 'c': (1, 1),\n 'est': (1, 3),\n 'super': (2, 5),\n 'ca': (2, 2),\n 'a': (2, 1),\n 'l': (2, 1),\n 'air': (2, 3),\n 'quand': (1, 5),\n 'même': (1, 4),\n 'un': (1, 2),\n 'peu': (1, 3),\n 'compliqué': (1, 9),\n 'Mais': (1, 4),\n 'bon': (1, 3),\n 'pratique': (1, 8),\n 'Peut-être': (1, 9),\n 'que': (1, 3),\n 'je': (1, 2),\n 'pourrais': (1, 8),\n 'm': (1, 1),\n 'en': (1, 2),\n 'servir': (1, 6),\n 'pour': (1, 4),\n 'faire': (1, 5),\n 'des': (1, 3),\n 'trucs': (1, 5)}\n```\n:::\n:::\n\n\n## The `namedtuple`\n\nThere is also the `namedtuple`. It's a `tuple` but with *named* attributes\n\n::: {#d989ef23 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:37:03.255687Z\",\"start_time\":\"2021-01-15T08:37:03.249481Z\"}}' execution_count=238}\n``` {.python .cell-code}\nfrom collections import namedtuple\n\nJedi = namedtuple('Jedi', ['firstname', 'lastname', 'age', 'color'])\nyoda = Jedi('Minch', 'Yoda', 900, 'green')\nyoda\n```\n\n::: {.cell-output .cell-output-display execution_count=1202}\n```\nJedi(firstname='Minch', lastname='Yoda', age=900, color='green')\n```\n:::\n:::\n\n\n::: {#aa145192 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:37:03.466246Z\",\"start_time\":\"2021-01-15T08:37:03.460414Z\"}}' execution_count=239}\n``` {.python .cell-code}\nyoda.firstname\n```\n\n::: {.cell-output .cell-output-display execution_count=1203}\n```\n'Minch'\n```\n:::\n:::\n\n\n::: {#a9f1c330 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:37:03.594771Z\",\"start_time\":\"2021-01-15T08:37:03.589467Z\"}}' execution_count=240}\n``` {.python .cell-code}\nyoda[1]\n```\n\n::: {.cell-output .cell-output-display execution_count=1204}\n```\n'Yoda'\n```\n:::\n:::\n\n\n**Remark.** A better alternative since `Python 3.7` is dataclasses. We will talk about it later\n\n:::\n\n# I/O, reading and writing files\n\nNext, put a text file `miserables.txt` in the folder containing \nthis notebook.  If it is not there, the next cell downloads it, if is it there, then we do nothing.\n\n::: {#a7e1cf22 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T09:18:44.977524Z\",\"start_time\":\"2021-01-15T09:18:44.691253Z\"}}' execution_count=241}\n``` {.python .cell-code}\nimport requests\nimport os\n\n# The path containing your notebook\npath_data = './data/'\n# The name of the file\nfilename = 'Une-tenebreuse-affaire.txt'\n```\n:::\n\n\n::: {#587a71a9 .cell execution_count=242}\n``` {.python .cell-code}\nif os.path.exists(os.path.join(path_data, filename)):\n    print('The file %s already exists.' % os.path.join(path_data, filename))\nelse:\n    url = 'https://s-v-b.github.io/IFEBY310/data/Une-tenebreuse-affaire.txt'\n    r = requests.get(url)\n    with open(os.path.join(path_data, filename), 'wb') as f:\n        f.write(r.content)\n    print('Downloaded file %s.' % os.path.join(path_data, filename))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe file ./data/Une-tenebreuse-affaire.txt already exists.\n```\n:::\n:::\n\n\n::: {#8e1a7a77 .cell execution_count=243}\n``` {.python .cell-code}\nls -alh  data\n```\n\n::: {.cell-output .cell-output-stdout}\n\n::: {.ansi-escaped-output}\n```{=html}\n<pre>total 584K\n\ndrwxrwxr-x  5 boucheron boucheron 4,0K janv.  9 16:33 <span class=\"ansi-blue-fg ansi-bold\">.</span>/\n\ndrwxrwxr-x 32 boucheron boucheron 4,0K janv.  9 21:32 <span class=\"ansi-blue-fg ansi-bold\">..</span>/\n\ndrwxr-xr-x  2 boucheron boucheron 4,0K mai   12  2025 <span class=\"ansi-blue-fg ansi-bold\">csr.parquet</span>/\n\ndrwxrwxr-x  3 boucheron boucheron 4,0K mars  10  2025 <span class=\"ansi-blue-fg ansi-bold\">__MACOSX</span>/\n\n-rw-rw-r--  1 boucheron boucheron 126K janv.  9 21:28 Une-tenebreuse-affaire.pkl\n\n-rw-rw-r--  1 boucheron boucheron 436K janv.  9 16:18 Une-tenebreuse-affaire.txt\n\ndrwxrwxr-x  2 boucheron boucheron 4,0K mars  10  2025 <span class=\"ansi-blue-fg ansi-bold\">webdata.parquet</span>/\n</pre>\n```\n:::\n\n:::\n:::\n\n\n::: {#24709284 .cell execution_count=244}\n``` {.python .cell-code}\n# !rm -f miserables.txt\n```\n:::\n\n\n::: {#66e0a27c .cell execution_count=245}\n``` {.python .cell-code}\nos.path.join(path_data, filename)\n```\n\n::: {.cell-output .cell-output-display execution_count=1209}\n```\n'./data/Une-tenebreuse-affaire.txt'\n```\n:::\n:::\n\n\nIn `jupyter` and `ipython` you can run terminal command lines using `!`\n\nLet's count number of lines and number of words with the `wc` command-line tool (linux or mac only, don't ask me how on windows)\n\n::: {#9ce9a1c4 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=246}\n``` {.python .cell-code}\n# Lines count\n!wc -l ./data/Une-tenebreuse-affaire.txt\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1118 ./data/Une-tenebreuse-affaire.txt\r\n```\n:::\n:::\n\n\n::: {#f4911550 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:39:35.525235Z\",\"start_time\":\"2021-01-15T08:39:35.244691Z\"}}' execution_count=247}\n``` {.python .cell-code}\n# Word count\n!wc -w ./data/Une-tenebreuse-affaire.txt\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n72659 ./data/Une-tenebreuse-affaire.txt\r\n```\n:::\n:::\n\n\n## Exercise\n\nCount the number of occurences of each word in the text file `Une-tenebreuse-affaire.txt`.\nWe use a `open` *context* and the `Counter` from before.\n\n::: {.content-visible when-profile='solution'} \n\n### Solution\n\n::: {#ff03e34e .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=248}\n``` {.python .cell-code}\nfrom collections import Counter\n\ncounter = Counter()\n\nwith open(os.path.join(path_data, filename), encoding='utf8') as f:\n    for line_idx, line in enumerate(f):\n        line = line.strip().replace('\\n', ' ')\\\n            .replace(',', ' ')\\\n            .replace('.', ' ')\\\n            .replace('»', ' ')\\\n            .replace('-', ' ')\\\n            .replace('!', ' ')\\\n            .replace('(', ' ')\\\n            .replace(')', ' ')\\\n            .replace('?', ' ').split()\n\n        counter.update(line)\n```\n:::\n\n\n::: {#982c72eb .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=249}\n``` {.python .cell-code}\ncounter\n```\n\n::: {.cell-output .cell-output-display execution_count=1213}\n```\nCounter({'de': 3607,\n         'la': 1965,\n         'et': 1803,\n         'le': 1780,\n         'les': 1408,\n         'à': 1391,\n         '—': 898,\n         'en': 858,\n         'des': 835,\n         'qui': 802,\n         'que': 717,\n         'il': 689,\n         'un': 658,\n         'dans': 610,\n         'du': 583,\n         'par': 547,\n         'dit': 522,\n         'se': 497,\n         'ne': 485,\n         'une': 482,\n         'pour': 482,\n         'vous': 440,\n         'au': 434,\n         'pas': 417,\n         'son': 393,\n         'ce': 372,\n         'sur': 368,\n         'sa': 365,\n         ';': 351,\n         'Michu': 348,\n         'lui': 337,\n         'elle': 330,\n         'avait': 305,\n         'plus': 297,\n         'deux': 286,\n         'avec': 264,\n         'ses': 260,\n         'Laurence': 259,\n         'mais': 231,\n         'cette': 228,\n         'nous': 223,\n         'Le': 222,\n         'a': 221,\n         'leur': 221,\n         'est': 220,\n         'Cinq': 217,\n         'Cygne': 215,\n         'comme': 210,\n         'où': 198,\n         'je': 196,\n         'était': 191,\n         \"d'Hauteserre\": 182,\n         'fut': 171,\n         'si': 166,\n         'tout': 166,\n         'ces': 164,\n         'Il': 163,\n         \"d'un\": 162,\n         'sans': 157,\n         'aux': 157,\n         'ils': 152,\n         'bien': 148,\n         'Corentin': 146,\n         'y': 140,\n         'Simeuse': 138,\n         'être': 132,\n         'La': 127,\n         'Malin': 125,\n         'monsieur': 123,\n         'tous': 120,\n         ':': 120,\n         'homme': 115,\n         \"qu'il\": 110,\n         'même': 108,\n         'dont': 108,\n         'Les': 106,\n         'faire': 106,\n         'fait': 102,\n         \"d'une\": 101,\n         'gens': 100,\n         'château': 98,\n         'femme': 98,\n         'moment': 98,\n         'marquis': 97,\n         'Marthe': 96,\n         'sont': 94,\n         'Gondreville': 94,\n         'alors': 93,\n         'avoir': 93,\n         'répondit': 92,\n         'Je': 92,\n         'on': 91,\n         'été': 90,\n         'forêt': 90,\n         'me': 90,\n         'En': 89,\n         'après': 88,\n         'temps': 87,\n         'madame': 85,\n         'ni': 84,\n         'Vous': 83,\n         'yeux': 82,\n         'leurs': 81,\n         'Mais': 81,\n         'donc': 80,\n         'mademoiselle': 80,\n         'Gothard': 80,\n         'avaient': 79,\n         'fit': 79,\n         'car': 78,\n         'Ce': 77,\n         'étaient': 76,\n         'quatre': 76,\n         'sénateur': 76,\n         'chez': 75,\n         'quand': 75,\n         'trois': 74,\n         'encore': 73,\n         'jeune': 73,\n         'voir': 72,\n         'mon': 72,\n         'sous': 71,\n         'cheval': 71,\n         'Elle': 71,\n         'peut': 71,\n         'ou': 70,\n         'Nous': 70,\n         'votre': 70,\n         'comtesse': 70,\n         'Fouché': 69,\n         'Troyes': 68,\n         'messieurs': 68,\n         'contre': 67,\n         \"s'écria\": 66,\n         'hommes': 65,\n         'Violette': 65,\n         'là': 64,\n         'toutes': 64,\n         'Grévin': 63,\n         'point': 62,\n         'fils': 62,\n         'moi': 62,\n         'accusés': 62,\n         'quelque': 61,\n         'vie': 60,\n         'aussi': 60,\n         'fois': 59,\n         'ans': 59,\n         'heures': 58,\n         'pendant': 58,\n         'petit': 58,\n         'entre': 57,\n         'mort': 57,\n         'avez': 57,\n         't': 57,\n         'Peyrade': 56,\n         'chevaux': 55,\n         'curé': 55,\n         'avant': 54,\n         'gentilshommes': 54,\n         'rien': 54,\n         'ceux': 53,\n         'depuis': 53,\n         'regard': 52,\n         'mille': 52,\n         'grand': 52,\n         'reprit': 52,\n         'eux': 52,\n         'cet': 51,\n         'demanda': 51,\n         'eut': 51,\n         'coup': 51,\n         'toujours': 50,\n         'dire': 50,\n         'Goujet': 50,\n         'mot': 49,\n         'A': 48,\n         'devait': 48,\n         'On': 48,\n         'toute': 48,\n         'Paris': 48,\n         'chemin': 47,\n         'vieux': 47,\n         'cinq': 47,\n         \"qu'elle\": 47,\n         'cousins': 47,\n         'personne': 47,\n         'Monsieur': 47,\n         'quelques': 46,\n         'assez': 46,\n         'mère': 46,\n         'devant': 46,\n         'parc': 46,\n         'Bordin': 46,\n         'France': 45,\n         'garde': 45,\n         'moins': 45,\n         'ministre': 45,\n         \"l'autre\": 45,\n         'salon': 45,\n         'public': 45,\n         'pouvait': 44,\n         'voix': 44,\n         'ma': 44,\n         'suis': 44,\n         \"l'un\": 43,\n         'pays': 43,\n         'celle': 43,\n         'fille': 43,\n         'jamais': 43,\n         'Aussi': 42,\n         'Bonaparte': 42,\n         'tête': 42,\n         'Quand': 42,\n         'Chargebœuf': 42,\n         'Si': 42,\n         'celui': 42,\n         'ici': 42,\n         'jurés': 42,\n         'Ces': 41,\n         'terre': 40,\n         'furent': 40,\n         'De': 40,\n         'tu': 40,\n         'laquelle': 39,\n         'prit': 39,\n         'paix': 39,\n         'seul': 39,\n         'Napoléon': 39,\n         'jours': 39,\n         'premier': 38,\n         \"d'Arcis\": 38,\n         \"qu'on\": 38,\n         'ont': 38,\n         'notre': 38,\n         \"qu'ils\": 38,\n         'vers': 37,\n         'belle': 37,\n         'père': 37,\n         'ferme': 37,\n         \"n'y\": 37,\n         'savoir': 37,\n         'brigadier': 37,\n         'gendarmes': 37,\n         'Cette': 36,\n         'cour': 36,\n         'pavillon': 36,\n         'Au': 36,\n         'main': 36,\n         'voyant': 36,\n         'jeunes': 36,\n         \"l'abbé\": 36,\n         'peu': 35,\n         \"l'on\": 35,\n         'donner': 35,\n         'Consul': 35,\n         'trop': 35,\n         \"n'est\": 35,\n         'police': 35,\n         'juge': 35,\n         'Grandville': 35,\n         'chose': 34,\n         'allait': 34,\n         'maison': 34,\n         'vint': 34,\n         'ainsi': 34,\n         'choses': 34,\n         'régisseur': 34,\n         'Marion': 34,\n         'sera': 34,\n         \"j'ai\": 34,\n         'vos': 34,\n         'venait': 33,\n         'mit': 33,\n         'avons': 33,\n         'sommes': 33,\n         'êtes': 33,\n         \"l'Empereur\": 33,\n         'jour': 32,\n         'frère': 32,\n         'Enfin': 32,\n         'Et': 32,\n         'Catherine': 32,\n         'maîtres': 32,\n         'Un': 31,\n         'nom': 31,\n         'monde': 31,\n         'doute': 30,\n         'côté': 30,\n         'nuit': 30,\n         'cœur': 30,\n         'mes': 30,\n         'Ils': 30,\n         'milieu': 29,\n         \"n'avait\": 29,\n         'mari': 29,\n         'dessus': 29,\n         \"s'était\": 29,\n         'francs': 29,\n         'Premier': 29,\n         'vingt': 29,\n         'justice': 29,\n         'bonhomme': 29,\n         'maire': 29,\n         'mois': 28,\n         'faisait': 28,\n         'mouvement': 28,\n         'grande': 28,\n         'fortune': 28,\n         'trouvait': 28,\n         'dix': 28,\n         'affaire': 28,\n         'vu': 28,\n         'Dans': 28,\n         'Dieu': 28,\n         'jury': 28,\n         'soir': 27,\n         'eût': 27,\n         'très': 27,\n         'Après': 27,\n         'cent': 27,\n         'porte': 27,\n         'mains': 27,\n         'Police': 27,\n         \"l'oreille\": 27,\n         'chercher': 27,\n         'lettre': 27,\n         'eu': 27,\n         'frères': 27,\n         'venir': 27,\n         'nos': 27,\n         'gendarme': 27,\n         \"l'accusateur\": 27,\n         'famille': 26,\n         \"d'ailleurs\": 26,\n         'Louis': 26,\n         'lieu': 26,\n         'général': 26,\n         'bas': 26,\n         'presque': 26,\n         'position': 26,\n         'gouvernement': 26,\n         'Durieu': 26,\n         'caractère': 25,\n         'puis': 25,\n         'beaucoup': 25,\n         'six': 25,\n         \"d'État\": 25,\n         \"c'est\": 25,\n         'Ah': 25,\n         'regarda': 25,\n         'veut': 25,\n         'force': 25,\n         'cause': 25,\n         'doit': 25,\n         \"n'a\": 25,\n         'pu': 24,\n         'aurait': 24,\n         'vieille': 24,\n         \"jusqu'à\": 24,\n         'figure': 24,\n         'sorte': 24,\n         'comte': 24,\n         'raison': 24,\n         'partie': 24,\n         'mis': 24,\n         'tant': 24,\n         \"l'affaire\": 24,\n         \"n'était\": 24,\n         \"s'en\": 24,\n         'sauver': 24,\n         'Talleyrand': 24,\n         'aller': 24,\n         'regardant': 24,\n         'procès': 24,\n         'prendre': 23,\n         'air': 23,\n         'devint': 23,\n         'long': 23,\n         'autant': 23,\n         'silence': 23,\n         'conspiration': 23,\n         'malgré': 23,\n         'chacun': 23,\n         \"s'il\": 23,\n         \"aujourd'hui\": 23,\n         'huit': 23,\n         'bonne': 23,\n         'chambre': 23,\n         'pied': 23,\n         'parler': 23,\n         'vieillard': 23,\n         'secret': 23,\n         '«': 23,\n         'Une': 23,\n         'Lechesneau': 23,\n         'femmes': 22,\n         'non': 22,\n         \"d'avoir\": 22,\n         'Oui': 22,\n         'face': 22,\n         'pensée': 22,\n         'président': 22,\n         'seule': 22,\n         'Ainsi': 22,\n         'mettre': 22,\n         'place': 22,\n         'déjà': 22,\n         'vit': 22,\n         \"qu'à\": 22,\n         'fermier': 22,\n         'cela': 22,\n         'pouvoir': 22,\n         'matin': 22,\n         'cas': 22,\n         'feu': 22,\n         'directeur': 22,\n         'chasse': 21,\n         'carabine': 21,\n         'Tu': 21,\n         'chaque': 21,\n         'lequel': 21,\n         'autres': 21,\n         'trouva': 21,\n         'pris': 21,\n         'serait': 21,\n         'pourquoi': 21,\n         'Goulard': 21,\n         'cadet': 21,\n         'enfin': 20,\n         'tuer': 20,\n         'beau': 20,\n         'donna': 20,\n         \"n'en\": 20,\n         'dernier': 20,\n         \"d'être\": 20,\n         'paroles': 20,\n         'enfant': 20,\n         \"s'y\": 20,\n         'voulait': 20,\n         \"s'est\": 20,\n         'signe': 20,\n         'Son': 19,\n         \"l'Aube\": 19,\n         'visage': 19,\n         'grille': 19,\n         'bois': 19,\n         'surtout': 19,\n         'faut': 19,\n         'prince': 19,\n         'marquise': 19,\n         'Sa': 19,\n         'faisant': 19,\n         'Mademoiselle': 19,\n         'notaire': 19,\n         'Que': 19,\n         'sais': 19,\n         'haut': 19,\n         \"l'air\": 19,\n         'loi': 19,\n         'va': 19,\n         'soit': 19,\n         'maîtresse': 19,\n         'Robert': 19,\n         \"l'Empire\": 18,\n         'Cet': 18,\n         'leva': 18,\n         \"l'homme\": 18,\n         'cheveux': 18,\n         'corps': 18,\n         'Depuis': 18,\n         'Révolution': 18,\n         'duc': 18,\n         'fer': 18,\n         'blanc': 18,\n         'présence': 18,\n         'loin': 18,\n         'nommé': 18,\n         'aussitôt': 18,\n         'bruit': 18,\n         'sortit': 18,\n         'bon': 18,\n         'mieux': 18,\n         'effet': 18,\n         'pauvre': 18,\n         'malheur': 18,\n         'ton': 18,\n         'jeta': 18,\n         'quoi': 18,\n         'personnes': 18,\n         'laisser': 18,\n         'agents': 18,\n         \"l'armée\": 18,\n         'seront': 18,\n         'gendarmerie': 18,\n         'table': 18,\n         'geste': 18,\n         'grâce': 18,\n         'auprès': 17,\n         'Non': 17,\n         'gros': 17,\n         \"l'hôtel\": 17,\n         'enfants': 17,\n         'jumeaux': 17,\n         'grands': 17,\n         'pieds': 17,\n         'événements': 17,\n         'donné': 17,\n         'tard': 17,\n         'parole': 17,\n         'générale': 17,\n         'cousine': 17,\n         'petite': 17,\n         'Conseiller': 17,\n         'passé': 17,\n         'droit': 17,\n         'comment': 17,\n         'politique': 17,\n         'fond': 17,\n         'entendu': 17,\n         'te': 17,\n         'pouvaient': 17,\n         'manière': 17,\n         'croyait': 17,\n         \"n'ai\": 17,\n         'bras': 17,\n         'Paul': 17,\n         'Marie': 17,\n         'Comment': 17,\n         'preuves': 17,\n         'mots': 17,\n         'lieutenant': 17,\n         \"m'a\": 17,\n         'bataille': 17,\n         'Tout': 17,\n         'Marsay': 17,\n         'aucun': 16,\n         'Madame': 16,\n         'lois': 16,\n         'front': 16,\n         'profond': 16,\n         'petits': 16,\n         'sens': 16,\n         'maître': 16,\n         'fût': 16,\n         'nouvelle': 16,\n         'ajouta': 16,\n         \"l'avait\": 16,\n         'venu': 16,\n         'Ne': 16,\n         'ami': 16,\n         'souvent': 16,\n         'souriant': 16,\n         'Tous': 16,\n         \"J'ai\": 16,\n         'afin': 16,\n         'Oh': 16,\n         'Eh': 16,\n         'plusieurs': 16,\n         'heure': 16,\n         'peine': 16,\n         'dernière': 16,\n         'habitants': 16,\n         'sœur': 16,\n         'témoins': 16,\n         'procureur': 16,\n         'plâtre': 16,\n         'défenseurs': 16,\n         'défenseur': 16,\n         'première': 15,\n         'espions': 15,\n         'Ses': 15,\n         'bouche': 15,\n         'prenant': 15,\n         'grandes': 15,\n         'également': 15,\n         \"d'où\": 15,\n         'biens': 15,\n         'prison': 15,\n         'conviction': 15,\n         'laissa': 15,\n         'Puis': 15,\n         'comprendre': 15,\n         'ancien': 15,\n         'situation': 15,\n         'voulut': 15,\n         \"l'aîné\": 15,\n         'liberté': 15,\n         'horrible': 15,\n         'cave': 15,\n         'trouve': 15,\n         'larmes': 15,\n         'brèche': 15,\n         'trouvé': 15,\n         'caveau': 15,\n         'arbres': 14,\n         \"qu'une\": 14,\n         'veux': 14,\n         'Or': 14,\n         'celles': 14,\n         'près': 14,\n         'sept': 14,\n         'auxquels': 14,\n         'douze': 14,\n         'route': 14,\n         'savait': 14,\n         'faits': 14,\n         'alla': 14,\n         'toi': 14,\n         \"C'est\": 14,\n         'voilà': 14,\n         'moindres': 14,\n         'fin': 14,\n         'comprit': 14,\n         \"d'y\": 14,\n         'aucune': 14,\n         'clair': 14,\n         'ennemis': 14,\n         'danger': 14,\n         'lendemain': 14,\n         'bouteilles': 14,\n         'vin': 14,\n         'Pour': 14,\n         'savez': 14,\n         'gentilhomme': 14,\n         'parti': 14,\n         'part': 14,\n         'coin': 14,\n         'autre': 14,\n         'demande': 14,\n         'vert': 13,\n         'terreur': 13,\n         'innocents': 13,\n         'service': 13,\n         'terrible': 13,\n         'nez': 13,\n         'derrière': 13,\n         'faisaient': 13,\n         'chef': 13,\n         'Condé': 13,\n         'noble': 13,\n         'mettait': 13,\n         'tribunal': 13,\n         'peur': 13,\n         'ville': 13,\n         'Saint': 13,\n         'donnait': 13,\n         'intérêts': 13,\n         'rendre': 13,\n         'profonde': 13,\n         'Voilà': 13,\n         'montrant': 13,\n         'connaissait': 13,\n         \"d'autant\": 13,\n         'montra': 13,\n         'cheminée': 13,\n         'parents': 13,\n         'défense': 13,\n         'Quant': 13,\n         'émigrés': 13,\n         'papiers': 13,\n         'servir': 13,\n         'vallée': 13,\n         'écuries': 13,\n         'lors': 13,\n         'haute': 13,\n         'hier': 13,\n         'visite': 13,\n         'creux': 13,\n         'croire': 13,\n         'valet': 13,\n         'voiture': 13,\n         'magistrat': 13,\n         'Sieyès': 13,\n         'quinze': 12,\n         'paraissait': 12,\n         'seulement': 12,\n         'possible': 12,\n         'vive': 12,\n         'passait': 12,\n         'fini': 12,\n         \"d'abord\": 12,\n         'dehors': 12,\n         'autour': 12,\n         'simple': 12,\n         'paysan': 12,\n         'conduite': 12,\n         \"l'ancien\": 12,\n         'froid': 12,\n         'Mon': 12,\n         'allez': 12,\n         'disant': 12,\n         'semblait': 12,\n         'François': 12,\n         'aime': 12,\n         'âme': 12,\n         'sec': 12,\n         'jeu': 12,\n         'campagne': 12,\n         'parut': 12,\n         'petites': 12,\n         'faites': 12,\n         'tandis': 12,\n         'disait': 12,\n         'Par': 12,\n         'entendit': 12,\n         'chapeau': 12,\n         'vient': 12,\n         'revint': 12,\n         'secrets': 12,\n         \"s'étaient\": 12,\n         'onze': 12,\n         'Pendant': 12,\n         \"l'âme\": 12,\n         'laissé': 12,\n         'moindre': 12,\n         'faveur': 12,\n         'Bourbons': 12,\n         'ci': 12,\n         \"qu'en\": 12,\n         'tour': 12,\n         'rester': 12,\n         'prévenir': 12,\n         'vérité': 12,\n         'entrer': 12,\n         'Messieurs': 12,\n         'cravache': 12,\n         'génie': 12,\n         'seuls': 12,\n         'ai': 12,\n         'regards': 12,\n         'demie': 12,\n         'débats': 12,\n         'Carnot': 12,\n         'peuple': 11,\n         'dû': 11,\n         'culotte': 11,\n         'rond': 11,\n         'parlant': 11,\n         'doivent': 11,\n         'cou': 11,\n         'terres': 11,\n         'Couraut': 11,\n         'lune': 11,\n         'devenu': 11,\n         'cri': 11,\n         'coucher': 11,\n         'intérêt': 11,\n         'circonstance': 11,\n         'servi': 11,\n         'besoin': 11,\n         'dis': 11,\n         'Cour': 11,\n         'dès': 11,\n         'mauvais': 11,\n         'rôle': 11,\n         'compromettre': 11,\n         'costume': 11,\n         'restait': 11,\n         'voyait': 11,\n         'question': 11,\n         'sait': 11,\n         'personnages': 11,\n         'figures': 11,\n         'ordres': 11,\n         'trente': 11,\n         'portait': 11,\n         'forme': 11,\n         'Voici': 11,\n         'inconnus': 11,\n         'tenir': 11,\n         'affaires': 11,\n         'basse': 11,\n         'instants': 11,\n         'tenait': 11,\n         'elles': 11,\n         'taille': 11,\n         'digne': 11,\n         'prise': 11,\n         'journée': 11,\n         'fusil': 11,\n         'ministère': 11,\n         'actuel': 11,\n         'semble': 11,\n         \"l'entrée\": 11,\n         'travers': 11,\n         'commune': 11,\n         'jouer': 11,\n         'plan': 11,\n         'réponse': 11,\n         'mêmes': 11,\n         'surpris': 11,\n         'nobles': 11,\n         'dame': 11,\n         'trouver': 11,\n         'rapidement': 11,\n         'put': 11,\n         \"qu'un\": 11,\n         'barrière': 11,\n         'criminelle': 11,\n         'juges': 11,\n         'Pigoult': 11,\n         'princesse': 11,\n         'beaux': 10,\n         'retour': 10,\n         'scène': 10,\n         'département': 10,\n         'blanche': 10,\n         'physionomie': 10,\n         'mourir': 10,\n         'sang': 10,\n         'regardait': 10,\n         'neuf': 10,\n         'appartenait': 10,\n         'noblesse': 10,\n         'Champagne': 10,\n         'Nodesme': 10,\n         'fers': 10,\n         'pierres': 10,\n         'domestique': 10,\n         'avocat': 10,\n         'tué': 10,\n         'compte': 10,\n         'compagnie': 10,\n         'rendit': 10,\n         'envoyé': 10,\n         'amis': 10,\n         'aurez': 10,\n         'or': 10,\n         'riche': 10,\n         \"l'œil\": 10,\n         'impossible': 10,\n         'Qui': 10,\n         'voulu': 10,\n         'dois': 10,\n         'Personne': 10,\n         'ensemble': 10,\n         'idées': 10,\n         'œil': 10,\n         'noire': 10,\n         'chère': 10,\n         'entièrement': 10,\n         'premiers': 10,\n         'moyens': 10,\n         'devaient': 10,\n         'champêtre': 10,\n         'champs': 10,\n         'vais': 10,\n         'Où': 10,\n         'drôle': 10,\n         'lit': 10,\n         'circonstances': 10,\n         'vêtements': 10,\n         'firent': 10,\n         'bientôt': 10,\n         'entra': 10,\n         'jugement': 10,\n         \"s'agissait\": 10,\n         \"s'agit\": 10,\n         'vrai': 10,\n         'passer': 10,\n         'crois': 10,\n         'veille': 10,\n         'partit': 10,\n         'reste': 10,\n         'rentes': 10,\n         'complot': 10,\n         'apprit': 10,\n         \"l'esprit\": 10,\n         'plaisir': 10,\n         'boston': 10,\n         'drame': 10,\n         \"l'intérêt\": 10,\n         'arriva': 10,\n         'quelle': 10,\n         'eurent': 10,\n         'Justice': 10,\n         'demander': 10,\n         'salle': 10,\n         \"l'état\": 10,\n         'Adrien': 10,\n         'sacs': 10,\n         \"l'accusation\": 10,\n         'longue': 9,\n         'jadis': 9,\n         'mal': 9,\n         \"l'avenue\": 9,\n         \"l'échafaud\": 9,\n         'quoique': 9,\n         'expression': 9,\n         'profondeur': 9,\n         'plein': 9,\n         'célèbre': 9,\n         'distance': 9,\n         'laissant': 9,\n         'trouvaient': 9,\n         'rendez': 9,\n         'village': 9,\n         'bout': 9,\n         'Notre': 9,\n         'demi': 9,\n         'lieues': 9,\n         'condamnation': 9,\n         'crut': 9,\n         'actes': 9,\n         'Cependant': 9,\n         'an': 9,\n         'paysans': 9,\n         'lire': 9,\n         'joué': 9,\n         'courut': 9,\n         'pâle': 9,\n         'as': 9,\n         'dites': 9,\n         'couper': 9,\n         'Néanmoins': 9,\n         'maintenant': 9,\n         'vivement': 9,\n         'Bellache': 9,\n         'cria': 9,\n         'soins': 9,\n         'heureux': 9,\n         'Parisiens': 9,\n         'eussent': 9,\n         'couleur': 9,\n         'découverte': 9,\n         'répliqua': 9,\n         'traces': 9,\n         'lèvres': 9,\n         'aidé': 9,\n         'aura': 9,\n         'genoux': 9,\n         'crime': 9,\n         'domestiques': 9,\n         'sublime': 9,\n         'semblable': 9,\n         'vengeance': 9,\n         'arrêter': 9,\n         'rapidité': 9,\n         'Georges': 9,\n         'XVIII': 9,\n         'quel': 9,\n         'connaître': 9,\n         'soldats': 9,\n         'entendre': 9,\n         'but': 9,\n         'tomba': 9,\n         'champ': 9,\n         'bonheur': 9,\n         \"d'eux\": 9,\n         'pensait': 9,\n         'debout': 9,\n         'belles': 9,\n         'hasard': 9,\n         'reconnu': 9,\n         'nature': 9,\n         'jument': 9,\n         \"d'autres\": 9,\n         'amazone': 9,\n         'nouvelles': 9,\n         'préfet': 9,\n         'haine': 9,\n         'vaste': 9,\n         \"l'histoire\": 9,\n         'officiers': 9,\n         'propre': 9,\n         'dîner': 9,\n         \"d'après\": 9,\n         'Sans': 9,\n         'terrain': 9,\n         'passion': 9,\n         'nécessaire': 9,\n         'reconnaître': 9,\n         'pouvez': 9,\n         'succès': 9,\n         'malheureux': 9,\n         'galop': 9,\n         'passage': 9,\n         'curiosité': 9,\n         \"l'arrestation\": 9,\n         'Majesté': 9,\n         \"l'empereur\": 9,\n         'calèche': 9,\n         \"d'accusation\": 9,\n         \"l'enlèvement\": 9,\n         'avocats': 9,\n         'déposition': 9,\n         \"L'accusateur\": 9,\n         'victoire': 9,\n         'ciel': 8,\n         'chiens': 8,\n         'faite': 8,\n         'certain': 8,\n         'quelconque': 8,\n         'laissait': 8,\n         'têtes': 8,\n         'murs': 8,\n         'immense': 8,\n         'détails': 8,\n         'masses': 8,\n         ...})\n```\n:::\n:::\n\n\n::: {#4cc4198b .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=250}\n``` {.python .cell-code}\ncounter.most_common(500)\n```\n\n::: {.cell-output .cell-output-display execution_count=1214}\n```\n[('de', 3607),\n ('la', 1965),\n ('et', 1803),\n ('le', 1780),\n ('les', 1408),\n ('à', 1391),\n ('—', 898),\n ('en', 858),\n ('des', 835),\n ('qui', 802),\n ('que', 717),\n ('il', 689),\n ('un', 658),\n ('dans', 610),\n ('du', 583),\n ('par', 547),\n ('dit', 522),\n ('se', 497),\n ('ne', 485),\n ('une', 482),\n ('pour', 482),\n ('vous', 440),\n ('au', 434),\n ('pas', 417),\n ('son', 393),\n ('ce', 372),\n ('sur', 368),\n ('sa', 365),\n (';', 351),\n ('Michu', 348),\n ('lui', 337),\n ('elle', 330),\n ('avait', 305),\n ('plus', 297),\n ('deux', 286),\n ('avec', 264),\n ('ses', 260),\n ('Laurence', 259),\n ('mais', 231),\n ('cette', 228),\n ('nous', 223),\n ('Le', 222),\n ('a', 221),\n ('leur', 221),\n ('est', 220),\n ('Cinq', 217),\n ('Cygne', 215),\n ('comme', 210),\n ('où', 198),\n ('je', 196),\n ('était', 191),\n (\"d'Hauteserre\", 182),\n ('fut', 171),\n ('si', 166),\n ('tout', 166),\n ('ces', 164),\n ('Il', 163),\n (\"d'un\", 162),\n ('sans', 157),\n ('aux', 157),\n ('ils', 152),\n ('bien', 148),\n ('Corentin', 146),\n ('y', 140),\n ('Simeuse', 138),\n ('être', 132),\n ('La', 127),\n ('Malin', 125),\n ('monsieur', 123),\n ('tous', 120),\n (':', 120),\n ('homme', 115),\n (\"qu'il\", 110),\n ('même', 108),\n ('dont', 108),\n ('Les', 106),\n ('faire', 106),\n ('fait', 102),\n (\"d'une\", 101),\n ('gens', 100),\n ('château', 98),\n ('femme', 98),\n ('moment', 98),\n ('marquis', 97),\n ('Marthe', 96),\n ('sont', 94),\n ('Gondreville', 94),\n ('alors', 93),\n ('avoir', 93),\n ('répondit', 92),\n ('Je', 92),\n ('on', 91),\n ('été', 90),\n ('forêt', 90),\n ('me', 90),\n ('En', 89),\n ('après', 88),\n ('temps', 87),\n ('madame', 85),\n ('ni', 84),\n ('Vous', 83),\n ('yeux', 82),\n ('leurs', 81),\n ('Mais', 81),\n ('donc', 80),\n ('mademoiselle', 80),\n ('Gothard', 80),\n ('avaient', 79),\n ('fit', 79),\n ('car', 78),\n ('Ce', 77),\n ('étaient', 76),\n ('quatre', 76),\n ('sénateur', 76),\n ('chez', 75),\n ('quand', 75),\n ('trois', 74),\n ('encore', 73),\n ('jeune', 73),\n ('voir', 72),\n ('mon', 72),\n ('sous', 71),\n ('cheval', 71),\n ('Elle', 71),\n ('peut', 71),\n ('ou', 70),\n ('Nous', 70),\n ('votre', 70),\n ('comtesse', 70),\n ('Fouché', 69),\n ('Troyes', 68),\n ('messieurs', 68),\n ('contre', 67),\n (\"s'écria\", 66),\n ('hommes', 65),\n ('Violette', 65),\n ('là', 64),\n ('toutes', 64),\n ('Grévin', 63),\n ('point', 62),\n ('fils', 62),\n ('moi', 62),\n ('accusés', 62),\n ('quelque', 61),\n ('vie', 60),\n ('aussi', 60),\n ('fois', 59),\n ('ans', 59),\n ('heures', 58),\n ('pendant', 58),\n ('petit', 58),\n ('entre', 57),\n ('mort', 57),\n ('avez', 57),\n ('t', 57),\n ('Peyrade', 56),\n ('chevaux', 55),\n ('curé', 55),\n ('avant', 54),\n ('gentilshommes', 54),\n ('rien', 54),\n ('ceux', 53),\n ('depuis', 53),\n ('regard', 52),\n ('mille', 52),\n ('grand', 52),\n ('reprit', 52),\n ('eux', 52),\n ('cet', 51),\n ('demanda', 51),\n ('eut', 51),\n ('coup', 51),\n ('toujours', 50),\n ('dire', 50),\n ('Goujet', 50),\n ('mot', 49),\n ('A', 48),\n ('devait', 48),\n ('On', 48),\n ('toute', 48),\n ('Paris', 48),\n ('chemin', 47),\n ('vieux', 47),\n ('cinq', 47),\n (\"qu'elle\", 47),\n ('cousins', 47),\n ('personne', 47),\n ('Monsieur', 47),\n ('quelques', 46),\n ('assez', 46),\n ('mère', 46),\n ('devant', 46),\n ('parc', 46),\n ('Bordin', 46),\n ('France', 45),\n ('garde', 45),\n ('moins', 45),\n ('ministre', 45),\n (\"l'autre\", 45),\n ('salon', 45),\n ('public', 45),\n ('pouvait', 44),\n ('voix', 44),\n ('ma', 44),\n ('suis', 44),\n (\"l'un\", 43),\n ('pays', 43),\n ('celle', 43),\n ('fille', 43),\n ('jamais', 43),\n ('Aussi', 42),\n ('Bonaparte', 42),\n ('tête', 42),\n ('Quand', 42),\n ('Chargebœuf', 42),\n ('Si', 42),\n ('celui', 42),\n ('ici', 42),\n ('jurés', 42),\n ('Ces', 41),\n ('terre', 40),\n ('furent', 40),\n ('De', 40),\n ('tu', 40),\n ('laquelle', 39),\n ('prit', 39),\n ('paix', 39),\n ('seul', 39),\n ('Napoléon', 39),\n ('jours', 39),\n ('premier', 38),\n (\"d'Arcis\", 38),\n (\"qu'on\", 38),\n ('ont', 38),\n ('notre', 38),\n (\"qu'ils\", 38),\n ('vers', 37),\n ('belle', 37),\n ('père', 37),\n ('ferme', 37),\n (\"n'y\", 37),\n ('savoir', 37),\n ('brigadier', 37),\n ('gendarmes', 37),\n ('Cette', 36),\n ('cour', 36),\n ('pavillon', 36),\n ('Au', 36),\n ('main', 36),\n ('voyant', 36),\n ('jeunes', 36),\n (\"l'abbé\", 36),\n ('peu', 35),\n (\"l'on\", 35),\n ('donner', 35),\n ('Consul', 35),\n ('trop', 35),\n (\"n'est\", 35),\n ('police', 35),\n ('juge', 35),\n ('Grandville', 35),\n ('chose', 34),\n ('allait', 34),\n ('maison', 34),\n ('vint', 34),\n ('ainsi', 34),\n ('choses', 34),\n ('régisseur', 34),\n ('Marion', 34),\n ('sera', 34),\n (\"j'ai\", 34),\n ('vos', 34),\n ('venait', 33),\n ('mit', 33),\n ('avons', 33),\n ('sommes', 33),\n ('êtes', 33),\n (\"l'Empereur\", 33),\n ('jour', 32),\n ('frère', 32),\n ('Enfin', 32),\n ('Et', 32),\n ('Catherine', 32),\n ('maîtres', 32),\n ('Un', 31),\n ('nom', 31),\n ('monde', 31),\n ('doute', 30),\n ('côté', 30),\n ('nuit', 30),\n ('cœur', 30),\n ('mes', 30),\n ('Ils', 30),\n ('milieu', 29),\n (\"n'avait\", 29),\n ('mari', 29),\n ('dessus', 29),\n (\"s'était\", 29),\n ('francs', 29),\n ('Premier', 29),\n ('vingt', 29),\n ('justice', 29),\n ('bonhomme', 29),\n ('maire', 29),\n ('mois', 28),\n ('faisait', 28),\n ('mouvement', 28),\n ('grande', 28),\n ('fortune', 28),\n ('trouvait', 28),\n ('dix', 28),\n ('affaire', 28),\n ('vu', 28),\n ('Dans', 28),\n ('Dieu', 28),\n ('jury', 28),\n ('soir', 27),\n ('eût', 27),\n ('très', 27),\n ('Après', 27),\n ('cent', 27),\n ('porte', 27),\n ('mains', 27),\n ('Police', 27),\n (\"l'oreille\", 27),\n ('chercher', 27),\n ('lettre', 27),\n ('eu', 27),\n ('frères', 27),\n ('venir', 27),\n ('nos', 27),\n ('gendarme', 27),\n (\"l'accusateur\", 27),\n ('famille', 26),\n (\"d'ailleurs\", 26),\n ('Louis', 26),\n ('lieu', 26),\n ('général', 26),\n ('bas', 26),\n ('presque', 26),\n ('position', 26),\n ('gouvernement', 26),\n ('Durieu', 26),\n ('caractère', 25),\n ('puis', 25),\n ('beaucoup', 25),\n ('six', 25),\n (\"d'État\", 25),\n (\"c'est\", 25),\n ('Ah', 25),\n ('regarda', 25),\n ('veut', 25),\n ('force', 25),\n ('cause', 25),\n ('doit', 25),\n (\"n'a\", 25),\n ('pu', 24),\n ('aurait', 24),\n ('vieille', 24),\n (\"jusqu'à\", 24),\n ('figure', 24),\n ('sorte', 24),\n ('comte', 24),\n ('raison', 24),\n ('partie', 24),\n ('mis', 24),\n ('tant', 24),\n (\"l'affaire\", 24),\n (\"n'était\", 24),\n (\"s'en\", 24),\n ('sauver', 24),\n ('Talleyrand', 24),\n ('aller', 24),\n ('regardant', 24),\n ('procès', 24),\n ('prendre', 23),\n ('air', 23),\n ('devint', 23),\n ('long', 23),\n ('autant', 23),\n ('silence', 23),\n ('conspiration', 23),\n ('malgré', 23),\n ('chacun', 23),\n (\"s'il\", 23),\n (\"aujourd'hui\", 23),\n ('huit', 23),\n ('bonne', 23),\n ('chambre', 23),\n ('pied', 23),\n ('parler', 23),\n ('vieillard', 23),\n ('secret', 23),\n ('«', 23),\n ('Une', 23),\n ('Lechesneau', 23),\n ('femmes', 22),\n ('non', 22),\n (\"d'avoir\", 22),\n ('Oui', 22),\n ('face', 22),\n ('pensée', 22),\n ('président', 22),\n ('seule', 22),\n ('Ainsi', 22),\n ('mettre', 22),\n ('place', 22),\n ('déjà', 22),\n ('vit', 22),\n (\"qu'à\", 22),\n ('fermier', 22),\n ('cela', 22),\n ('pouvoir', 22),\n ('matin', 22),\n ('cas', 22),\n ('feu', 22),\n ('directeur', 22),\n ('chasse', 21),\n ('carabine', 21),\n ('Tu', 21),\n ('chaque', 21),\n ('lequel', 21),\n ('autres', 21),\n ('trouva', 21),\n ('pris', 21),\n ('serait', 21),\n ('pourquoi', 21),\n ('Goulard', 21),\n ('cadet', 21),\n ('enfin', 20),\n ('tuer', 20),\n ('beau', 20),\n ('donna', 20),\n (\"n'en\", 20),\n ('dernier', 20),\n (\"d'être\", 20),\n ('paroles', 20),\n ('enfant', 20),\n (\"s'y\", 20),\n ('voulait', 20),\n (\"s'est\", 20),\n ('signe', 20),\n ('Son', 19),\n (\"l'Aube\", 19),\n ('visage', 19),\n ('grille', 19),\n ('bois', 19),\n ('surtout', 19),\n ('faut', 19),\n ('prince', 19),\n ('marquise', 19),\n ('Sa', 19),\n ('faisant', 19),\n ('Mademoiselle', 19),\n ('notaire', 19),\n ('Que', 19),\n ('sais', 19),\n ('haut', 19),\n (\"l'air\", 19),\n ('loi', 19),\n ('va', 19),\n ('soit', 19),\n ('maîtresse', 19),\n ('Robert', 19),\n (\"l'Empire\", 18),\n ('Cet', 18),\n ('leva', 18),\n (\"l'homme\", 18),\n ('cheveux', 18),\n ('corps', 18),\n ('Depuis', 18),\n ('Révolution', 18),\n ('duc', 18),\n ('fer', 18),\n ('blanc', 18),\n ('présence', 18),\n ('loin', 18),\n ('nommé', 18),\n ('aussitôt', 18),\n ('bruit', 18),\n ('sortit', 18),\n ('bon', 18),\n ('mieux', 18),\n ('effet', 18),\n ('pauvre', 18),\n ('malheur', 18),\n ('ton', 18),\n ('jeta', 18),\n ('quoi', 18),\n ('personnes', 18),\n ('laisser', 18),\n ('agents', 18),\n (\"l'armée\", 18),\n ('seront', 18),\n ('gendarmerie', 18),\n ('table', 18),\n ('geste', 18),\n ('grâce', 18),\n ('auprès', 17),\n ('Non', 17)]\n```\n:::\n:::\n\n\n:::\n\n\n## Contexts \n\n- A *context* in Python is something that we use with the `with` keyword.\n\n- It allows to deal automatically with the opening and the closing of the file.\n\nNote the for loop:\n```{.python}\nfor line in f:\n    ...\n```\nYou loop directly over the lines of the open file from **within** the `open` context\n\n## About `pickle`\n\nYou can save your computation with `pickle`. \n\n- `pickle` is a way of saving **almost anything** with Python.\n- It serializes the object in a binary format, and is usually the simplest and fastest way to go.\n\n::: {#7e3a658e .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:19.146250Z\",\"start_time\":\"2021-01-15T08:40:19.105800Z\"}}' execution_count=251}\n``` {.python .cell-code}\nimport pickle as pkl\n\npkl_fpath = os.path.join(path_data, filename.replace('txt','pkl'))\n# Let's save it\nwith open(pkl_fpath, 'wb') as f:\n    pkl.dump(counter, f)\n\n# And read it again\nwith open(pkl_fpath, 'rb') as f:\n    counter = pkl.load(f)\n```\n:::\n\n\n::: {#d9fdba47 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:20.330093Z\",\"start_time\":\"2021-01-15T08:40:20.320482Z\"}}' execution_count=252}\n``` {.python .cell-code}\ncounter.most_common(10)\n```\n\n::: {.cell-output .cell-output-display execution_count=1216}\n```\n[('de', 3607),\n ('la', 1965),\n ('et', 1803),\n ('le', 1780),\n ('les', 1408),\n ('à', 1391),\n ('—', 898),\n ('en', 858),\n ('des', 835),\n ('qui', 802)]\n```\n:::\n:::\n\n\n# Defining functions\n\nYou **must** use function to order and reuse code\n\n## Function definition\n\nFunction blocks must be indented as other control-flow blocks.\n\n::: {#25aa7664 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:22.581564Z\",\"start_time\":\"2021-01-15T08:40:22.574422Z\"}}' execution_count=253}\n``` {.python .cell-code}\ndef test():\n    return 'in test function'\n\ntest()\n```\n\n::: {.cell-output .cell-output-display execution_count=1217}\n```\n'in test function'\n```\n:::\n:::\n\n\n## Return statement\n\nFunctions can *optionally* return values.\nBy default, functions return ``None``.\n\nThe syntax to define a function:\n\n- the ``def`` keyword;\n- is followed by the function's **name**, then\n- the arguments of the function are given between parentheses followed by a colon\n- the function body;\n- and ``return object`` for optionally returning values.\n\n::: {#ca3653bc .cell execution_count=254}\n``` {.python .cell-code}\nNone is None\n```\n\n::: {.cell-output .cell-output-display execution_count=1218}\n```\nTrue\n```\n:::\n:::\n\n\n::: {#73207b94 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:25.396369Z\",\"start_time\":\"2021-01-15T08:40:25.389580Z\"}}' execution_count=255}\n``` {.python .cell-code}\ndef f(x):\n    return x + 10\nf(20)\n```\n\n::: {.cell-output .cell-output-display execution_count=1219}\n```\n30\n```\n:::\n:::\n\n\nA function that returns several elements returns a `tuple`\n\n::: {#ab8761d1 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:25.827300Z\",\"start_time\":\"2021-01-15T08:40:25.821162Z\"}}' execution_count=256}\n``` {.python .cell-code}\ndef f(x):\n    return x + 1, x + 4\n\nf(5)\n```\n\n::: {.cell-output .cell-output-display execution_count=1220}\n```\n(6, 9)\n```\n:::\n:::\n\n\n::: {#ce90a878 .cell execution_count=257}\n``` {.python .cell-code}\ntype(f)\n```\n\n::: {.cell-output .cell-output-display execution_count=1221}\n```\nfunction\n```\n:::\n:::\n\n\n::: {#29d18717 .cell execution_count=258}\n``` {.python .cell-code}\nf.truc = \"bonjour\"\n```\n:::\n\n\n::: {#97565b83 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:26.056197Z\",\"start_time\":\"2021-01-15T08:40:26.050039Z\"}}' execution_count=259}\n``` {.python .cell-code}\ntype(f(5))\n```\n\n::: {.cell-output .cell-output-display execution_count=1223}\n```\ntuple\n```\n:::\n:::\n\n\n## Parameters\n\nMandatory parameters (positional arguments)\n\n::: {#c5b1e849 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:26.897893Z\",\"start_time\":\"2021-01-15T08:40:26.891052Z\"}}' execution_count=260}\n``` {.python .cell-code}\ndef double_it(x, /):\n    return x * 2\n\ndouble_it(2)\n```\n\n::: {.cell-output .cell-output-display execution_count=1224}\n```\n4\n```\n:::\n:::\n\n\n::: {#5790b001 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:27.154900Z\",\"start_time\":\"2021-01-15T08:40:27.127912Z\"}}' execution_count=261}\n``` {.python .cell-code}\ntry:\n    double_it()\nexcept TypeError:\n    print(\"TypeError: double_it() missing 1 required positional argument: 'x'\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTypeError: double_it() missing 1 required positional argument: 'x'\n```\n:::\n:::\n\n\nOptimal parameters\n\n::: {#67492fbc .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=262}\n``` {.python .cell-code}\ndef double_it(x=2):\n    return x * 2\n\ndouble_it()\n```\n\n::: {.cell-output .cell-output-display execution_count=1226}\n```\n4\n```\n:::\n:::\n\n\n::: {#f59ce2da .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:30.162845Z\",\"start_time\":\"2021-01-15T08:40:30.155840Z\"}}' execution_count=263}\n``` {.python .cell-code}\ndouble_it(3)\n```\n\n::: {.cell-output .cell-output-display execution_count=1227}\n```\n6\n```\n:::\n:::\n\n\n::: {#d299397b .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=264}\n``` {.python .cell-code}\ndef f(x ,  y=2, z=10):\n    print(x, '+', y, '+', z, '=', x + y + z)\n```\n:::\n\n\n::: {#e9f94200 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:30.696765Z\",\"start_time\":\"2021-01-15T08:40:30.691179Z\"}}' execution_count=265}\n``` {.python .cell-code}\nf(5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n5 + 2 + 10 = 17\n```\n:::\n:::\n\n\n::: {#63baedf7 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:31.857293Z\",\"start_time\":\"2021-01-15T08:40:31.851956Z\"}}' execution_count=266}\n``` {.python .cell-code}\nf(5, -2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n5 + -2 + 10 = 13\n```\n:::\n:::\n\n\n::: {#bd65819d .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:32.095421Z\",\"start_time\":\"2021-01-15T08:40:32.089684Z\"}}' execution_count=267}\n``` {.python .cell-code}\nf(5, -2, 8)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n5 + -2 + 8 = 11\n```\n:::\n:::\n\n\n::: {#a11842a7 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:32.310466Z\",\"start_time\":\"2021-01-15T08:40:32.304981Z\"}}' execution_count=268}\n``` {.python .cell-code}\nf(z=5, x=-2, y=8)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n-2 + 8 + 5 = 11\n```\n:::\n:::\n\n\nTo avoid the possibility  of passing a positional argument as a keyword argument, there exists a special construct:\n\n::: {#9358af9b .cell execution_count=269}\n``` {.python .cell-code}\n# %%\n# %%\ndef f(x , /,  y=2, z=10):\n    print(x, '+', y, '+', z, '=', x + y + z)\n```\n:::\n\n\n::: {#db88fb48 .cell execution_count=270}\n``` {.python .cell-code}\ntry:\n    f(z=5, x=10, y=3)\nexcept TypeError:\n    print(\"TypeError: f() got some positional-only arguments passed as keyword arguments: 'x'\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nTypeError: f() got some positional-only arguments passed as keyword arguments: 'x'\n```\n:::\n:::\n\n\n## Argument unpacking and keyword argument unpacking\n\nYou can do stuff like this, using unpacking `*` notation\n\n::: {#3b085c05 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:32.767851Z\",\"start_time\":\"2021-01-15T08:40:32.762760Z\"}}' execution_count=271}\n``` {.python .cell-code}\na, *b, c = 1, 2, 3, 4, 5\na, b, c\n```\n\n::: {.cell-output .cell-output-display execution_count=1235}\n```\n(1, [2, 3, 4], 5)\n```\n:::\n:::\n\n\nIf we are just interested in the first and last item \n\n::: {#bf271f3c .cell execution_count=272}\n``` {.python .cell-code}\nfirst, *_, last =   1, 2, 3, 4, 5\nfirst, last\n```\n\n::: {.cell-output .cell-output-display execution_count=1236}\n```\n(1, 5)\n```\n:::\n:::\n\n\nBack to function `f` you can unpack a `tuple` as positional arguments\n\n::: {#89f28844 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=273}\n``` {.python .cell-code}\ntt = (1, 2, 3)\nf(*tt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1 + 2 + 3 = 6\n```\n:::\n:::\n\n\nWe can also use dictionnary unpacking for keywords parameters.\n\n::: {#5df357e4 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:33.344119Z\",\"start_time\":\"2021-01-15T08:40:33.339429Z\"}}' execution_count=274}\n``` {.python .cell-code}\ndd = {'y': 10, 'z': -5}\n```\n:::\n\n\n::: {#fd1987ab .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:33.503933Z\",\"start_time\":\"2021-01-15T08:40:33.497965Z\"}}' execution_count=275}\n``` {.python .cell-code}\nf(3, **dd)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n3 + 10 + -5 = 8\n```\n:::\n:::\n\n\nWe can use both\n\n::: {#9a60a725 .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=276}\n``` {.python .cell-code}\ndef g(x, z, y, t=1, u=2):\n    print(x, '+', y, '+', z, '+', t, '+', \n          u, '=', x + y + z + t + u)\n```\n:::\n\n\n::: {#b0b3d573 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:33.853331Z\",\"start_time\":\"2021-01-15T08:40:33.847946Z\"}}' execution_count=277}\n``` {.python .cell-code}\ntt = (1, -4, 2)\ndd = {'t': 10, 'u': -5}\ng(*tt, **dd)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1 + 2 + -4 + 10 + -5 = 4\n```\n:::\n:::\n\n\n## The prototype of all functions in `Python`\n\n::: {#7bd84dea .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=278}\n``` {.python .cell-code}\ndef f(*args, **kwargs):\n    print('args=', args)\n    print('kwargs=', kwargs)\n\nf(1, 2, 'truc', lastname='lagaffe', firstname='gaston')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nargs= (1, 2, 'truc')\nkwargs= {'lastname': 'lagaffe', 'firstname': 'gaston'}\n```\n:::\n:::\n\n\n- Uses `*` for **argument unpacking** and `**` for **keyword argument unpacking**\n- The names `args` and `kwargs` are a convention, not mandatory \n- (but you are fired if you name these arguments otherwise)\n\n::: {#dcfb874d .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"fragment\"}}' execution_count=279}\n``` {.python .cell-code}\n# How to get fired\ndef f(*aaa, **bbb):\n    print('args=', aaa)\n    print('kwargs=', bbb)\nf(1, 2, 'truc', lastname='lagaffe', firstname='gaston')    \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nargs= (1, 2, 'truc')\nkwargs= {'lastname': 'lagaffe', 'firstname': 'gaston'}\n```\n:::\n:::\n\n\n**Remark**. A function is a regular an object... you can add attributes on it !\n\n::: {#06d2d922 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:34.887176Z\",\"start_time\":\"2021-01-15T08:40:34.884378Z\"}}' execution_count=280}\n``` {.python .cell-code}\nf.truc = 4\n```\n:::\n\n\n::: {#a7bd2419 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:34.968083Z\",\"start_time\":\"2021-01-15T08:40:34.963229Z\"}}' execution_count=281}\n``` {.python .cell-code}\nf(1, 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nargs= (1, 3)\nkwargs= {}\n```\n:::\n:::\n\n\n::: {#74bcb264 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:35.082074Z\",\"start_time\":\"2021-01-15T08:40:35.076581Z\"}}' execution_count=282}\n``` {.python .cell-code}\nf(3, -2, y='truc')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nargs= (3, -2)\nkwargs= {'y': 'truc'}\n```\n:::\n:::\n\n\n# Object-oriented programming (OOP)\n\nPython supports object-oriented programming (OOP). The goals of OOP are:\n\n- to organize the code, and\n- to re-use code in similar contexts.\n\nHere is a small example: we create a `Student` class, which is an object\ngathering several custom functions (called *methods*) and variables \n(called *attributes*).\n\n::: {#fab6fc6c .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=283}\n``` {.python .cell-code}\nclass Student(object):\n\n    def __init__(self, name, birthyear, major='computer science'):\n        self.name = name\n        self.birthyear = birthyear\n        self.major = major\n\n    def __repr__(self):\n        return \"Student(name='{name}', birthyear={birthyear}, major='{major}')\"\\\n                .format(name=self.name, birthyear=self.birthyear, major=self.major)\n\nanna = Student('anna', 1987)\nanna\n```\n\n::: {.cell-output .cell-output-display execution_count=1247}\n```\nStudent(name='anna', birthyear=1987, major='computer science')\n```\n:::\n:::\n\n\nThe `__repr__` is what we call a 'magic method' (or 'dunder method') in Python, that allows \nto display an object as a string easily. There is a very large number of such magic methods.\nThere are used to implement **interfaces**\n\n## Exercise \n\nAdd a `age` method to the Student class that computes the age of the student. \n- You  can (and should) use the `datetime` module. \n- Since we only know about the birth year, let's assume that the day of the birth is January, 1st.\n\n::: {.content-visible unless-profile=\"solution\"}\n\n::: {#090a7441 .cell execution_count=284}\n``` {.python .cell-code}\nfrom datetime import datetime\n\n# your code here\n```\n:::\n\n\n:::\n\n::: {.content-visible when-profile='solution'} \n\n### Correction\n\n::: {#7cd04e2b .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:38.739250Z\",\"start_time\":\"2021-01-15T08:40:38.731816Z\"}}' execution_count=285}\n``` {.python .cell-code}\nfrom datetime import datetime\n\nclass Student(object):\n\n    def __init__(self, name, birthyear, major='computer science'):\n        self.name = name\n        self.birthyear = birthyear\n        self.major = major\n\n    def __repr__(self):\n        return \"Student(name='{name}', birthyear={birthyear}, major='{major}')\"\\\n                .format(name=self.name, birthyear=self.birthyear, major=self.major)\n\n    def age(self):\n        return datetime.now().year - self.birthyear\n        \nanna = Student('anna', 1987)\nanna.age()\n```\n\n::: {.cell-output .cell-output-display execution_count=1249}\n```\n39\n```\n:::\n:::\n\n\n:::\n\n\n## Properties\n\nWe can make methods look like attributes using **properties**, as shown below\n\n::: {#50c713a3 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:41.454538Z\",\"start_time\":\"2021-01-15T08:40:41.447007Z\"}}' execution_count=286}\n``` {.python .cell-code}\nclass Student(object):\n\n    def __init__(self, name, birthyear, major='computer science'):\n        self.name = name\n        self.birthyear = birthyear\n        self.major = major\n\n    def __repr__(self):\n        return \"Student(name='{name}', birthyear={birthyear}, major='{major}')\"\\\n                .format(name=self.name, birthyear=self.birthyear, major=self.major)\n\n    @property\n    def age(self):\n        return datetime.now().year - self.birthyear\n        \nanna = Student('anna', 1987)\nanna.age\n```\n\n::: {.cell-output .cell-output-display execution_count=1250}\n```\n39\n```\n:::\n:::\n\n\nHere `property` is a *decorator* \n\n::: {#59094c42 .cell execution_count=287}\n``` {.python .cell-code}\nmaria = eval(repr(anna))\n```\n:::\n\n\n::: {#52dbf26e .cell execution_count=288}\n``` {.python .cell-code}\nid(maria), id(anna)\n```\n\n::: {.cell-output .cell-output-display execution_count=1252}\n```\n(130263837904720, 130262626214224)\n```\n:::\n:::\n\n\n`maria` and `anna` are different objects, eventhough they have the same attributes (check with `maria.__dict__`)\n\n\n## Inheritance \n\nA `MasterStudent` is a `Student` with a new extra mandatory `internship` attribute\n\n::: {#cc86dc88 .cell execution_count=289}\n``` {.python .cell-code}\n\"%d\" % 2\n```\n\n::: {.cell-output .cell-output-display execution_count=1253}\n```\n'2'\n```\n:::\n:::\n\n\n::: {#86938f28 .cell execution_count=290}\n``` {.python .cell-code}\nx = 2\n\nf\"truc {x}\"\n```\n\n::: {.cell-output .cell-output-display execution_count=1254}\n```\n'truc 2'\n```\n:::\n:::\n\n\n::: {#5fa3e5a0 .cell execution_count=291}\n``` {.python .cell-code}\nclass MasterStudent(Student):\n    \n    def __init__(self, name, age, internship, major='computer science'):\n        # Student.__init__(self, name, age, major)\n        Student.__init__(self, name, age, major)\n        self.internship = internship\n\n    def __repr__(self):\n        return f\"MasterStudent(name='{self.name}', internship={self.internship}, birthyear={self.birthyear}, major={self.major})\"\n    \nMasterStudent('spirou', 22, 'pwc')\n```\n\n::: {.cell-output .cell-output-display execution_count=1255}\n```\nMasterStudent(name='spirou', internship=pwc, birthyear=22, major=computer science)\n```\n:::\n:::\n\n\n::: {#25d8b87d .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:44.047633Z\",\"start_time\":\"2021-01-15T08:40:44.039779Z\"}}' execution_count=292}\n``` {.python .cell-code}\nclass MasterStudent(Student):\n    \n    def __init__(self, name, age, internship, major='computer science'):\n        # Student.__init__(self, name, age, major)\n        Student.__init__(self, name, age, major)\n        self.internship = internship\n\n    def __repr__(self):\n        return \"MasterStudent(name='{name}', internship='{internship}'\" \\\n               \", birthyear={birthyear}, major='{major}')\"\\\n                .format(name=self.name, internship=self.internship,\n                        birthyear=self.birthyear, major=self.major)\n    \nspirou = MasterStudent('spirou', 1996, 'pwc')\n```\n:::\n\n\n::: {#79484d01 .cell execution_count=293}\n``` {.python .cell-code}\nspirou.__dict__\n```\n\n::: {.cell-output .cell-output-display execution_count=1257}\n```\n{'name': 'spirou',\n 'birthyear': 1996,\n 'major': 'computer science',\n 'internship': 'pwc'}\n```\n:::\n:::\n\n\n::: {#6400a6af .cell execution_count=294}\n``` {.python .cell-code}\nspirou.birthyear\n```\n\n::: {.cell-output .cell-output-display execution_count=1258}\n```\n1996\n```\n:::\n:::\n\n\n::: {#32caa340 .cell execution_count=295}\n``` {.python .cell-code}\nspirou.__dict__[\"birthyear\"]\n```\n\n::: {.cell-output .cell-output-display execution_count=1259}\n```\n1996\n```\n:::\n:::\n\n\n## Monkey patching\n\n- Classes in `Python`  are `objects` and actually `dict`s under the hood...\n- Therefore classes are objects that can be changed on the fly\n\n::: {#fb090698 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:44.745686Z\",\"start_time\":\"2021-01-15T08:40:44.739499Z\"}}' execution_count=296}\n``` {.python .cell-code}\nclass Monkey(object):\n    \n    def __init__(self, name):\n        self.name = name\n\n    def describe(self):\n        print(\"Old monkey %s\" % self.name)\n\ndef patch(self):\n    print(\"New monkey %s\" % self.name)\n\nmonkey = Monkey(\"Baloo\")\nmonkey.describe()\n\nMonkey.describe = patch\nmonkey.describe()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOld monkey Baloo\nNew monkey Baloo\n```\n:::\n:::\n\n\n::: {#907ca97f .cell execution_count=297}\n``` {.python .cell-code}\nmonkeys = [Monkey(\"Baloo\"), Monkey(\"Super singe\")]\n\nmonkey_name = monkey.name\n\nfor i in range(1000):    \n    monkey_name\n```\n:::\n\n\n## Data classes\n\nSince `Python 3.7` you can use a dataclass for this\n\nDoes a lot of work for you (produces the `__repr__` among many other things for you)\n\nThis is another use *decorators*.\n\n::: {#a753010b .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:46.810275Z\",\"start_time\":\"2021-01-15T08:40:46.796524Z\"}}' execution_count=298}\n``` {.python .cell-code}\nfrom dataclasses import dataclass\nfrom datetime import datetime \n\n@dataclass\nclass Student(object):\n    name: str\n    birthyear: int\n    major: str = 'computer science'\n\n    @property\n    def age(self):\n        return datetime.now().year - self.birthyear\n        \nanna = Student(name=\"anna\", birthyear=1987)\nanna\n```\n\n::: {.cell-output .cell-output-display execution_count=1262}\n```\nStudent(name='anna', birthyear=1987, major='computer science')\n```\n:::\n:::\n\n\n::: {#480fed82 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:47.251530Z\",\"start_time\":\"2021-01-15T08:40:47.246324Z\"}}' execution_count=299}\n``` {.python .cell-code}\nprint(anna.age)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n39\n```\n:::\n:::\n\n\n# Most common mistakes\n\n- Let us wrap this up with the most common mistakes with `Python`\n\nFirst, best way to learn and practice:\n\n- Start with the official tutorial https://docs.python.org/fr/3/tutorial/index.html\n\n- Look at https://python-3-for-scientists.readthedocs.io/en/latest/index.html\n\n- Continue with the documentation at https://docs.python.org/fr/3/index.html and work!\n\n## Using a mutable value as a default value\n\n::: {#4b199ace .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:51.446805Z\",\"start_time\":\"2021-01-15T08:40:51.441178Z\"}}' execution_count=300}\n``` {.python .cell-code}\ndef foo(bar=[]):\n    bar.append('oops')\n    return bar\n\nprint(foo())\nprint(foo())\nprint(foo())\n\nprint('-' * 8)\nprint(foo(['Ah ah']))\nprint(foo([]))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['oops']\n['oops', 'oops']\n['oops', 'oops', 'oops']\n--------\n['Ah ah', 'oops']\n['oops']\n```\n:::\n:::\n\n\n::: {#c3b5dee3 .cell execution_count=301}\n``` {.python .cell-code}\nprint(foo.__defaults__)\nfoo()\nprint(foo.__defaults__)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(['oops', 'oops', 'oops'],)\n(['oops', 'oops', 'oops', 'oops'],)\n```\n:::\n:::\n\n\n- The default value for a function argument is evaluated once, *when the function is defined*\n- `the` bar argument is initialized to its default (i.e., an empty list) only when foo() is first defined\n- successive calls to `foo()` (with no  `bar` argument specified) use the same list!\n\nOne should use instead\n\n::: {#65b36e6b .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=302}\n``` {.python .cell-code}\ndef foo(bar=None):\n    if bar is None:\n        bar = []\n    bar.append('oops')\n    return bar\n\nprint(foo())\nprint(foo())\nprint(foo())\nprint(foo(['OK']))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['oops']\n['oops']\n['oops']\n['OK', 'oops']\n```\n:::\n:::\n\n\n::: {#3a5b0067 .cell execution_count=303}\n``` {.python .cell-code}\nprint(foo.__defaults__)\nfoo()\nprint(foo.__defaults__)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(None,)\n(None,)\n```\n:::\n:::\n\n\nNo problem with immutable types\n\n::: {#d543c141 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:53.337268Z\",\"start_time\":\"2021-01-15T08:40:53.330411Z\"}}' execution_count=304}\n``` {.python .cell-code}\ndef foo(bar=()):\n    bar += ('oops',)\n    return bar\n\nprint(foo())\nprint(foo())\nprint(foo())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n('oops',)\n('oops',)\n('oops',)\n```\n:::\n:::\n\n\n::: {#661894c8 .cell execution_count=305}\n``` {.python .cell-code}\nprint(foo.__defaults__)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n((),)\n```\n:::\n:::\n\n\n## Class attributes VS object attributes\n\n::: {#45e5df7b .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:53.948439Z\",\"start_time\":\"2021-01-15T08:40:53.942319Z\"}}' execution_count=306}\n``` {.python .cell-code}\nclass A(object):\n    x = 1\n\n    def __init__(self):\n        self.y = 2\n\nclass B(A):\n    def __init__(self):\n        super().__init__()\n\nclass C(A):\n    def __init__(self):\n        super().__init__()\n\na, b, c = A(), B(), C()\n```\n:::\n\n\n::: {#49e6f18a .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:54.135498Z\",\"start_time\":\"2021-01-15T08:40:54.131029Z\"}}' execution_count=307}\n``` {.python .cell-code}\nprint(a.x, b.x, c.x)\nprint(a.y, b.y, c.y)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1 1 1\n2 2 2\n```\n:::\n:::\n\n\n::: {#59d4d0db .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=308}\n``` {.python .cell-code}\na.y = 3\nprint(a.y, b.y, c.y)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n3 2 2\n```\n:::\n:::\n\n\n::: {#f5b82c98 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:55.058452Z\",\"start_time\":\"2021-01-15T08:40:55.050679Z\"}}' execution_count=309}\n``` {.python .cell-code}\na.x = 3  # adds  a new object attribute named x in object a\nprint(a.x, b.x, c.x)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n3 1 1\n```\n:::\n:::\n\n\n::: {#9f64c65a .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:55.812247Z\",\"start_time\":\"2021-01-15T08:40:55.805966Z\"}}' execution_count=310}\n``` {.python .cell-code}\nA.x = 4 # Changes the class attribute x of class A\nprint(a.x, b.x, c.x)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n3 4 4\n```\n:::\n:::\n\n\n- Attribute `x` is not an **attribute** of `b` nor `c`\n- It is also not a **class attribute** of classes `B` and `C`\n- So, it is is looked up in the base class `A`, which contains a **class attribute** `x`\n\nClasses and objects contain a hidden `dict` to store their attributes, and are accessed following a method resolution order (MRO)\n\n::: {#2b012abe .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=311}\n``` {.python .cell-code}\na.__dict__, b.__dict__, c.__dict__\n```\n\n::: {.cell-output .cell-output-display execution_count=1275}\n```\n({'y': 3, 'x': 3}, {'y': 2}, {'y': 2})\n```\n:::\n:::\n\n\n::: {#0c4a3e47 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:57.372472Z\",\"start_time\":\"2021-01-15T08:40:57.365176Z\"}}' execution_count=312}\n``` {.python .cell-code}\nA.__dict__, B.__dict__, C.__dict__\n```\n\n::: {.cell-output .cell-output-display execution_count=1276}\n```\n(mappingproxy({'__module__': '__main__',\n               'x': 4,\n               '__init__': <function __main__.A.__init__(self)>,\n               '__dict__': <attribute '__dict__' of 'A' objects>,\n               '__weakref__': <attribute '__weakref__' of 'A' objects>,\n               '__doc__': None}),\n mappingproxy({'__module__': '__main__',\n               '__init__': <function __main__.B.__init__(self)>,\n               '__doc__': None}),\n mappingproxy({'__module__': '__main__',\n               '__init__': <function __main__.C.__init__(self)>,\n               '__doc__': None}))\n```\n:::\n:::\n\n\nThis can lead to **nasty** errors when using class attributes: learn more about this\n\n## Python scope rules\n\n::: {#78106a38 .cell execution_count=313}\n``` {.python .cell-code}\ntry:\n    ints += [4]\nexcept NameError:\n    print(\"NameError: name 'ints' is not defined\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nNameError: name 'ints' is not defined\n```\n:::\n:::\n\n\n::: {#4a36631b .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:58.254394Z\",\"start_time\":\"2021-01-15T08:40:58.250379Z\"}}' execution_count=314}\n``` {.python .cell-code}\nints = [1]\n\ndef foo1():\n    ints.append(2)\n    return ints\n\ndef foo2():\n    ints += [2]\n    return ints\n```\n:::\n\n\n::: {#c3b0e495 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:40:58.471436Z\",\"start_time\":\"2021-01-15T08:40:58.464761Z\"}}' execution_count=315}\n``` {.python .cell-code}\nfoo1()\n```\n\n::: {.cell-output .cell-output-display execution_count=1279}\n```\n[1, 2]\n```\n:::\n:::\n\n\n::: {#58d99fbf .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"-\"}}' execution_count=316}\n``` {.python .cell-code}\ntry:    \n    foo2()\nexcept UnboundLocalError as inst:\n    print(inst)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ncannot access local variable 'ints' where it is not associated with a value\n```\n:::\n:::\n\n\n### What the hell ?\n\nAn assignment to a variable in a scope assumes that the variable is *local* to that scope and shadows any similarly named variable in any outer scope\n\n```{.python}\nints += [2]\n```\nmeans\n\n```{.python}\nints = ints + [2]\n```\n\nwhich is an *assigment*: `ints` must be defined in the local scope, but it is not, while\n\n```{.python}\nints.append(2)\n```\n\nis not an *assignemnt*\n\nIn `foo1` there is no local variable, whereas in `foo2`, `ints` is a local variable (which is not associated with a value).\n\n::: {#8bc66d38 .cell execution_count=317}\n``` {.python .cell-code}\nprint(\n    foo1.__code__.co_varnames,\n    foo2.__code__.co_varnames\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n() ('ints',)\n```\n:::\n:::\n\n\n## Modify a `list` while iterating over it\n\n::: {#798638fb .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:41:05.902243Z\",\"start_time\":\"2021-01-15T08:41:05.890704Z\"}}' execution_count=318}\n``` {.python .cell-code}\nodd = lambda x: bool(x % 2)\nnumbers = list(range(10))\n\ntry:\n  for i in range(len(numbers)):\n      if odd(numbers[i]):\n          del numbers[i]\nexcept IndexError as inst:\n    print(inst)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nlist index out of range\n```\n:::\n:::\n\n\nTypically an example where one should use a list comprehension\n\n::: {#d338742a .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:41:16.008696Z\",\"start_time\":\"2021-01-15T08:41:16.002196Z\"}}' execution_count=319}\n``` {.python .cell-code}\n[number for number in numbers if not odd(number)]\n```\n\n::: {.cell-output .cell-output-display execution_count=1283}\n```\n[0, 2, 4, 6, 8]\n```\n:::\n:::\n\n\n## No docstrings\n\nAccept to spend time to write clean docstrings (look at `numpydoc` style)\n\n::: {#eedf1fe5 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:41:17.239948Z\",\"start_time\":\"2021-01-15T08:41:17.236031Z\"}}' execution_count=320}\n``` {.python .cell-code}\ndef create_student(name, age, address, major='computer science'):\n    \"\"\"Add a student in the database\n    \n    Parameters\n    ----------\n    name: `str`\n        Name of the student\n    \n    age: `int`\n        Age of the student\n    \n    address: `str`\n        Address of the student\n    \n    major: `str`, default='computer science'\n        The major chosen by the student\n    \n    Returns\n    -------\n    output: `Student`\n        A fresh student\n    \"\"\"\n    pass\n```\n:::\n\n\n::: {#965e0a47 .cell execution_count=321}\n``` {.python .cell-code}\ncreate_student('Duduche', 28, 'Chalons')\n```\n:::\n\n\n## Not using available methods and/or the simplest solution\n\n::: {#8fedd8f6 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:41:19.794009Z\",\"start_time\":\"2021-01-15T08:41:19.785191Z\"}}' execution_count=322}\n``` {.python .cell-code}\ndd = {'gaston': 1234, 'gael': 4567, 'gontran': 891011}\n\n# Bad\nfor key in dd.keys():\n    print(key, dd[key])\n\nprint('-' * 8)\n\n# Good\nfor key, value in dd.items():\n    print(key, value)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ngaston 1234\ngael 4567\ngontran 891011\n--------\ngaston 1234\ngael 4567\ngontran 891011\n```\n:::\n:::\n\n\n::: {#815c1e9d .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=323}\n``` {.python .cell-code}\ncolors = ['black', 'yellow', 'brown', 'red', 'pink']\n\n# Bad\nfor i in range(len(colors)):\n    print(i, colors[i])\n\nprint('-' * 8)\n\n# Good\nfor i, color in enumerate(colors):\n    print(i, color)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n0 black\n1 yellow\n2 brown\n3 red\n4 pink\n--------\n0 black\n1 yellow\n2 brown\n3 red\n4 pink\n```\n:::\n:::\n\n\n## Not using the standard library \n\nWhile it's **always** better than a hand-made solution\n\n::: {#23b3a2b1 .cell quarto-private-1='{\"key\":\"ExecuteTime\",\"value\":{\"end_time\":\"2021-01-15T08:41:21.109134Z\",\"start_time\":\"2021-01-15T08:41:21.101392Z\"}}' execution_count=324}\n``` {.python .cell-code}\nlist1 = [1, 2]\nlist2 = [3, 4]\nlist3 = [5, 6, 7]\n\nfor a in list1:\n    for b in list2:\n        for c in list3:\n            print(a, b, c)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1 3 5\n1 3 6\n1 3 7\n1 4 5\n1 4 6\n1 4 7\n2 3 5\n2 3 6\n2 3 7\n2 4 5\n2 4 6\n2 4 7\n```\n:::\n:::\n\n\n::: {#ae09e82f .cell quarto-private-1='{\"key\":\"slideshow\",\"value\":{\"slide_type\":\"subslide\"}}' execution_count=325}\n``` {.python .cell-code}\nfrom itertools import product\n\nfor a, b, c in product(list1, list2, list3):\n    print(a, b, c)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1 3 5\n1 3 6\n1 3 7\n1 4 5\n1 4 6\n1 4 7\n2 3 5\n2 3 6\n2 3 7\n2 4 5\n2 4 6\n2 4 7\n```\n:::\n:::\n\n\n# The end !\n\n\n\n[@ramalho_fluent_2022]\n\n",
    "supporting": [
      "notebook01_python_files/figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}